{"meta":{"title":"ChenAibing | Blog","subtitle":null,"description":null,"author":"Chen Aibing","url":"http://yoursite.com"},"pages":[{"title":"about","date":"2017-01-24T03:11:26.000Z","updated":"2017-01-24T03:11:26.000Z","comments":true,"path":"about/index.html","permalink":"http://yoursite.com/about/index.html","excerpt":"","text":"","raw":null,"content":null}],"posts":[{"title":"Reactç»„ä»¶å•å…ƒæµ‹è¯•","slug":"Reactç»„ä»¶å•å…ƒæµ‹è¯•","date":"2017-01-18T03:25:02.000Z","updated":"2017-01-24T07:41:09.000Z","comments":true,"path":"20170118/Reactç»„ä»¶å•å…ƒæµ‹è¯•/","link":"","permalink":"http://yoursite.com/20170118/Reactç»„ä»¶å•å…ƒæµ‹è¯•/","excerpt":"é’ˆå¯¹reactç»„ä»¶çš„å•å…ƒæµ‹è¯•ï¼Œfacebookæä¾›äº†Test Utilitiesæµ‹è¯•å·¥å…·åº“ï¼ŒAirbnbåŸºäºæ­¤å°è£…äº†ä½¿ç”¨æ›´æ–¹ä¾¿çš„Enzymeã€‚å¦å¤–æ™®åŠä¸€ä¸‹Reactçš„æµ‹è¯•æ¡†æ¶Jestã€‚\nTest UtilitiesShallow Rendering - æµ…æ¸²æŸ“Shallow renderingæ˜¯æŒ‡å°†ç»„ä»¶æ¸²æŸ“æˆè™šæ‹ŸDOMå¯¹è±¡ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰åŠ è½½è¿›çœŸå®DOMï¼Œæ‰€ä»¥å¹¶ä¸è¦æ±‚DOMç¯å¢ƒï¼Œæµ…æ¸²æŸ“åªæ¸²æŸ“ç»„ä»¶çš„ç¬¬ä¸€å±‚ï¼Œä¸æ¶‰åŠæ‰€æœ‰çš„å­ç»„ä»¶ï¼Œå› æ­¤åœ¨å¤„ç†é€Ÿåº¦ä¸Šéå¸¸å¿«ã€‚","text":"é’ˆå¯¹reactç»„ä»¶çš„å•å…ƒæµ‹è¯•ï¼Œfacebookæä¾›äº†Test Utilitiesæµ‹è¯•å·¥å…·åº“ï¼ŒAirbnbåŸºäºæ­¤å°è£…äº†ä½¿ç”¨æ›´æ–¹ä¾¿çš„Enzymeã€‚å¦å¤–æ™®åŠä¸€ä¸‹Reactçš„æµ‹è¯•æ¡†æ¶Jestã€‚ Test UtilitiesShallow Rendering - æµ…æ¸²æŸ“Shallow renderingæ˜¯æŒ‡å°†ç»„ä»¶æ¸²æŸ“æˆè™šæ‹ŸDOMå¯¹è±¡ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰åŠ è½½è¿›çœŸå®DOMï¼Œæ‰€ä»¥å¹¶ä¸è¦æ±‚DOMç¯å¢ƒï¼Œæµ…æ¸²æŸ“åªæ¸²æŸ“ç»„ä»¶çš„ç¬¬ä¸€å±‚ï¼Œä¸æ¶‰åŠæ‰€æœ‰çš„å­ç»„ä»¶ï¼Œå› æ­¤åœ¨å¤„ç†é€Ÿåº¦ä¸Šéå¸¸å¿«ã€‚å‡½æ•°shallowRenderè¿”å›æµ…æ¸²æŸ“çš„è™šæ‹ŸDOMå¯¹è±¡ï¼š1234567import TestUtils from &apos;react/lib/ReactTestUtils.js&apos;;function shallowRender(Component, props)&#123; const renderer = TestUtils.createRenderer(); renderer.render(&lt;Component &#123;...props&#125;/&gt;); return renderer.getRenderOutput();&#125; æµ…æ¸²æŸ“é€‚ç”¨äºä¸éœ€è¦DOMäº¤äº’ï¼Œä¸æ¶‰åŠå­ç»„ä»¶çš„æƒ…å†µï¼Œå¦‚ç®€å•éªŒè¯å±æ€§è®¾ç½®æ˜¯å¦æ­£ç¡®ï¼Œä¼ å€¼æ˜¯å¦æ­£å¸¸ç­‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒéªŒè¯Buttonç»„ä»¶phStyleè®¾ç½®ä¸ºprimaryæ˜¯å¦æˆåŠŸæ·»åŠ åˆ°classNameä¸­ï¼š12345678910import React from &apos;react&apos;;import assert from &apos;assert&apos;;import Button from &apos;../src/Button&apos;;describe(&quot;&lt;Button/&gt;&quot;, function()&#123; it(&apos;phStyleè®¾ç½®ä¸ºprimary&apos;, ()=&gt;&#123; const button = shallowRender(&lt;Button phStyle=&apos;primary&apos;&gt;&lt;/Button&gt;); assert(button.props.className.match(&apos;primary&apos;)); &#125;);&#125;); renderIntoDocument - å°†elementæ¸²æŸ“æˆçœŸå®çš„DOMèŠ‚ç‚¹renderIntoDocumentå°†ç»„ä»¶å®ä¾‹åŒ–ï¼Œæ¸²æŸ“æˆçœŸå®çš„DOMå¯¹è±¡ï¼Œå› æ­¤æ“ä½œç¯å¢ƒä¹Ÿæ˜¯è¦æ±‚å¿…é¡»æ˜¯çœŸå®çš„DOMç¯å¢ƒã€‚æ¸²æŸ“æˆçœŸå®DOMä¹‹åï¼Œå¯ä»¥è¿›è¡Œäº¤äº’ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹å­ç»„ä»¶çš„çŠ¶æ€ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒéªŒè¯Switchç»„ä»¶æ”¹å˜æ—¶æ˜¯å¦è§¦å‘äº†onChangeï¼š1234567891011121314// ...import &#123;findDOMNode&#125; from &apos;react-dom&apos;;import Switch from &apos;../src/Switch&apos;;describe(&quot;&lt;Switch/&gt;&quot;, function()&#123; it(&apos;æ”¹å˜æ—¶è§¦å‘onChange&apos;, ()=&gt;&#123; let checked = true; const switchs = TestUtils.renderIntoDocument(&lt;Switch checked=&#123;checked&#125; onChange=&#123;()=&gt;&#123;checked=false&#125;&#125; /&gt;); const checkbox = TestUtils.scryRenderedDOMComponentsWithTag(switchs, &apos;input&apos;)[0]; TestUtils.Simulate.change(checkbox); assert.equal(checked, false); &#125;);&#125;); åˆå§‹è®¾ç½®checkedä¸ºtrueï¼Œç”±äºå½“å‰æ˜¯çœŸå®DOMï¼Œç”¨åˆ°äº†findDOMNodeå‡½æ•°ï¼ŒæŸ¥æ‰¾DOMç»“æ„ä¸­çš„å½“å‰switchèŠ‚ç‚¹ï¼Œæ‰‹åŠ¨æ”¹å˜ï¼Œæ ¹æ®checkedæ•°å€¼çš„å¯¹æ¯”åˆ¤æ–­æ˜¯å¦æ‰§è¡Œäº†onChangeã€‚ Simulate - æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œSimulate.{eventName}(element,[eventData])å°†ç»„ä»¶æ¸²æŸ“è¿›çœŸå®DOMä¸­ï¼Œæ¨¡æ‹Ÿäººä¸ºæ“ä½œï¼Œå¦‚ç‚¹å‡»ã€è¾“å…¥ç­‰ã€‚123TestUtils.Simulate.click(node);TestUtils.Simulate.change(node);TestUtils.Simulate.keyDown(node, &#123;key: &quot;Enter&quot;, keyCode: 13, which: 13&#125;); èŠ‚ç‚¹æŸ¥æ‰¾Test Utilitiesæä¾›çš„èŠ‚ç‚¹æŸ¥æ‰¾çš„æ–¹æ³•ä»…é€‚ç”¨äºæ¸²æŸ“æˆçœŸå®DOMèŠ‚ç‚¹çš„æƒ…å†µï¼Œå¦‚æœæ˜¯è™šæ‹ŸDOMæ˜¯é€šè¿‡å¯¹props.childrenè¿›è¡ŒæŸ¥æ‰¾ã€‚ è™šæ‹ŸDOMçš„èŠ‚ç‚¹æŸ¥æ‰¾12345678// ...it(&apos;checkbox: labelä¼ å€¼æ˜¾ç¤ºæ­£å¸¸&apos;, ()=&gt;&#123; let label = &apos;æµ‹è¯•&apos;; const checkbox = shallowRender(&lt;Input type=&apos;checkbox&apos; label=&#123;label&#125; /&gt;); assert.equal(checkbox.props.children[1].props.children, label);&#125;);// ... checkbox.props.children[1].props.childrenæŸ¥æ‰¾çš„æ˜¯ç¬¬äºŒä¸ªå­å…ƒç´ çš„å†…å®¹ã€‚ çœŸå®DOMçš„èŠ‚ç‚¹æŸ¥æ‰¾å¯¹äºçœŸå®DOMèŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯JavaScriptåŸç”Ÿçš„ä¸€äº›æ–¹æ³•ï¼Œå¦‚findDOMNode(node).querySelector(...)ã€‚ä»¥ä¸‹æ˜¯Test Utilitiesæä¾›çš„æ–¹æ³•ï¼š scryRenderedDOMComponentsWithClassï¼šæ‰¾å‡ºæ‰€æœ‰åŒ¹é…æŒ‡å®šclassNameçš„èŠ‚ç‚¹ findRenderedDOMComponentWithClassï¼šä¸scryRenderedDOMComponentsWithClassç”¨æ³•ç›¸åŒï¼Œä½†åªè¿”å›ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœ‰é›¶ä¸ªæˆ–å¤šä¸ªåŒ¹é…çš„èŠ‚ç‚¹å°±æŠ¥é”™ scryRenderedDOMComponentsWithTagï¼šæ‰¾å‡ºæ‰€æœ‰åŒ¹é…æŒ‡å®šæ ‡ç­¾çš„èŠ‚ç‚¹ findRenderedDOMComponentWithTagï¼šä¸scryRenderedDOMComponentsWithTagç”¨æ³•ç›¸åŒï¼Œä½†åªè¿”å›ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœ‰é›¶ä¸ªæˆ–å¤šä¸ªåŒ¹é…çš„èŠ‚ç‚¹å°±æŠ¥é”™ scryRenderedComponentsWithTypeï¼šæ‰¾å‡ºæ‰€æœ‰ç¬¦åˆæŒ‡å®šå­ç»„ä»¶çš„èŠ‚ç‚¹ findRenderedComponentWithTypeï¼šä¸scryRenderedComponentsWithTypeç”¨æ³•ç›¸åŒï¼Œä½†åªè¿”å›ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœ‰é›¶ä¸ªæˆ–å¤šä¸ªåŒ¹é…çš„èŠ‚ç‚¹å°±æŠ¥é”™ findAllInRenderedTreeï¼šéå†å½“å‰ç»„ä»¶æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œåªè¿”å›é‚£äº›ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ æ›´å¤šä¿¡æ¯ï¼šTest Utilities EnzymeEnzymeæ¨¡æ‹Ÿäº†JQueryçš„APIå°è£…äº†ä¸€å¥—å¿«é€Ÿä¾¿æ·çš„æµ‹è¯•å·¥å…·åº“ï¼Œç†Ÿæ‚‰JQçš„å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“ä¸Šæ‰‹ã€‚ ä½¿ç”¨æ­£å¼ä½¿ç”¨å‰æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ é¦–å…ˆï¼Œå¯¹äºwebpackçš„ä½¿ç”¨è€…ï¼Œå¯¹äºä¸åŒçš„Reactç‰ˆæœ¬ï¼Œé…ç½®ä¸­éœ€è¦åŠ ä¸Šï¼š 123456789/* webpack.config.js for React 0.14 */// ...externals: &#123; &apos;cheerio&apos;: &apos;window&apos;, &apos;react/addons&apos;: true, &apos;react/lib/ExecutionEnvironment&apos;: true, &apos;react/lib/ReactContext&apos;: true&#125;// ... 12345678/* webpack.config.js for React 15 */// ...externals: &#123; &apos;react/addons&apos;: true, &apos;react/lib/ExecutionEnvironment&apos;: true, &apos;react/lib/ReactContext&apos;: true&#125;// ... æ›´å¤šä¿¡æ¯ï¼šenzyme-guides é’ˆå¯¹ä¸åŒç‰ˆæœ¬Reactçš„å®‰è£… 123/* React 0.13 */npm i react@0.13 --savenpm i --save-dev enzyme 1234/* React 0.14 */npm i --save react@0.14 react-dom@0.14npm i --save-dev react-addons-test-utils@0.14npm i --save-dev enzyme 1234/* React 15 */npm i --save react@15.0.0-rc.2 react-dom@15.0.0-rc.2npm i --save-dev react-addons-test-utils@15.0.0-rc.2npm i --save-dev enzyme æ›´å¤šä¿¡æ¯ï¼šenzyme-installation APIshallowshallowæ–¹æ³•æ˜¯å¯¹Shallow Renderingçš„å°è£…ï¼ŒåŒä¸€ä¸ªä¾‹å­ï¼Œè·å–classNameçš„æ–¹æ³•é€šè¿‡props()æ–¹æ³•è¿”å›ã€‚123456// ...it(&apos;phStyleè®¾ç½®ä¸ºprimary&apos;, ()=&gt;&#123; const button = shallow(&lt;Button phStyle=&apos;primary&apos;&gt;btn&lt;/Button&gt;); assert(button.props().className.match(&apos;primary&apos;));&#125;);// ... åŒä¸€ä¸ªä¾‹å­ï¼Œä½¿ç”¨find()æ–¹æ³•æŸ¥æ‰¾å­èŠ‚ç‚¹ï¼Œtext()æ–¹æ³•è·å–æ–‡æœ¬å†…å®¹ã€‚12345678// ...it(&apos;checkbox: labelä¼ å€¼æ˜¾ç¤ºæ­£å¸¸&apos;, ()=&gt;&#123; let label = &apos;æµ‹è¯•&apos;; const checkbox = shallow(&lt;Input type=&apos;checkbox&apos; label=&#123;label&#125; /&gt;); assert.equal(checkbox.find(&apos;span&apos;).text(), label);&#125;);// ... mountmountå°†Reactç»„ä»¶åŠ è½½ä¸ºçœŸå®çš„DOMèŠ‚ç‚¹ã€‚å’Œshallowçš„apiç›¸åŒï¼Œç”¨find()æ–¹æ³•æŸ¥æ‰¾å­èŠ‚ç‚¹ï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ“ä½œçš„æ–¹æ³•å°è£…ä¸ºsimulate(enentType)ã€‚123456789// ...it(&apos;æ”¹å˜æ—¶è§¦å‘onChange&apos;, ()=&gt;&#123; let checked = true; const switchs = mount(&lt;Switch checked=&#123;checked&#125; onChange=&#123;()=&gt;&#123;checked=false&#125;&#125; /&gt;); switchs.find(&apos;input&apos;).simulate(&apos;change&apos;); assert.equal(checked, false);&#125;);// ... renderrenderæ–¹æ³•é‡‡ç”¨ç¬¬ä¸‰æ–¹åº“Cheerioï¼Œå°†Reactç»„ä»¶æ¸²æŸ“æˆé™æ€çš„HTMLç‰‡æ®µå¹¶åˆ†æå…¶HTMLä»£ç ç»“æ„ï¼Œè¿”å›ä¸€ä¸ªCheerioå®ä¾‹å¯¹è±¡ã€‚12345678// ...it(&apos;checkbox: labelä¼ å€¼æ˜¾ç¤ºæ­£å¸¸&apos;, ()=&gt;&#123; let label = &apos;æµ‹è¯•&apos;; const checkbox = render(&lt;Input type=&apos;checkbox&apos; label=&#123;label&#125; /&gt;); assert.equal(checkbox.find(&apos;span&apos;).text(), label);&#125;);// ... ä½¿ç”¨renderæ–¹æ³•æ—¶ç¢°åˆ°ä¸€ä¸ªé”™è¯¯ï¼š_cheerio2.default.load is not a functionï¼Œè¿˜æ˜¯æ¯”è¾ƒæ™®éçš„ï¼Œè·Ÿwebpacké…ç½®æœ‰å…³ç³»ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š1234567891011121314externals: &#123; &apos;jsdom&apos;: &apos;window&apos;, // &apos;cheerio&apos;: &apos;window&apos;, // ... &#125;, module:&#123; loaders:[ // ... &#123; test: /\\.json$/, loader: &apos;json&apos;, &#125; ] &#125; æ›´å¤šä¿¡æ¯ï¼šenzyme-api å…¶ä»–JestJestæ˜¯facebookåŸºäºJasmineçš„å¼€å‘çš„é’ˆå¯¹Reactçš„å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚æŸ¥èµ„æ–™çš„æ—¶å€™æœ‰äº›æ–‡ç« ä¼šå¯¹æ¯”Enzymeå’ŒJestï¼Œè®©äººè¯¯ä»¥ä¸ºæ˜¯åŒä¸€ç§ä¸œè¥¿çš„ä¸åŒè¡¨è¾¾å½¢å¼ï¼Œä½†å…¶å®å‰è€…æ˜¯æµ‹è¯•å·¥å…·åº“ï¼Œåè€…æ˜¯æµ‹è¯•æ¡†æ¶ï¼Œæ›´å¤šçš„æ—¶å€™ï¼Œä¸¤è€…æ˜¯é…åˆèµ·æ¥ä½¿ç”¨çš„ã€‚ Jest is a JavaScript unit testing framework, used by Facebook to test services and React applications. æ™®åŠåˆ°æ­¤ä¸ºæ­¢ï¼Œæœ‰éœ€è¦ä¹‹åä¼šç ”ç©¶ä¸€ä¸‹Jestï¼Œç„¶åå¥½å¥½å†™ä¸€ç¯‡ã€‚ æ›´å¤šä¿¡æ¯ï¼šjest-react-tutorial æ€»ç»“å…¶å®è¿™ä¸€ç¯‡ä»‹ç»çš„ä¸œè¥¿å¾ˆå°‘ï¼Œå´å†™äº†å¾ˆå¤šçš„ä¾‹å­ï¼Œè¿˜è®°å½•äº†ä¸€äº›ä½¿ç”¨è¿‡ç¨‹ä¸­è®©äººå›°æ‰°çš„æŠ¥é”™ã€‚ç›®å‰æµ‹è¯•ç®—æ˜¯æœ‰ä¸€å¥—æ¯”è¾ƒå®Œå–„çš„æœºåˆ¶ï¼Œä½†æ˜¯æ€»çš„æ¥è¯´ä¸œè¥¿æ¯”è¾ƒæ—§æ¯”è¾ƒå°‘ï¼ŒæŸ¥åˆ°çš„å¤§éƒ¨åˆ†èµ„æ–™éƒ½æ˜¯å¹´ä»½æ¯”è¾ƒä¹…è¿œçš„ã€‚ğŸ˜„","raw":null,"content":null,"categories":[{"name":"react","slug":"react","permalink":"http://yoursite.com/categories/react/"},{"name":"test","slug":"react/test","permalink":"http://yoursite.com/categories/react/test/"}],"tags":[{"name":"react","slug":"react","permalink":"http://yoursite.com/tags/react/"},{"name":"test","slug":"test","permalink":"http://yoursite.com/tags/test/"},{"name":"é™ˆå°é¥¼","slug":"é™ˆå°é¥¼","permalink":"http://yoursite.com/tags/é™ˆå°é¥¼/"}]},{"title":"Yarn-æ¨¡å—ç®¡ç†å·¥å…·","slug":"Yarn-æ¨¡å—ç®¡ç†å·¥å…·","date":"2017-01-11T11:39:50.000Z","updated":"2017-01-24T07:41:59.000Z","comments":true,"path":"20170111/Yarn-æ¨¡å—ç®¡ç†å·¥å…·/","link":"","permalink":"http://yoursite.com/20170111/Yarn-æ¨¡å—ç®¡ç†å·¥å…·/","excerpt":"ç®€ä»‹2016å¹´10æœˆ11æ—¥ï¼Œfacebookå‘å¸ƒæ–°çš„æ¨¡å—ç®¡ç†å·¥å…·Yarnã€‚éšç€NPMçš„å¹¿æ³›ä½¿ç”¨ä¸­ï¼Œå¼€å§‹å‡ºç°å®‰å…¨æ€§å’Œæ€§èƒ½ä¸è¶³çš„é—®é¢˜ï¼Œå¦‚ï¼š\n\nå®‰è£…é€Ÿåº¦æ…¢ï¼ˆè™½ç„¶æ·˜å®NPMé•œåƒè§£å†³äº†å›½å†…ä¸‹è½½æ…¢çš„ç°è±¡ï¼Œä½†æ˜¯ä¸å¯å¦è®¤ä½¿ç”¨NPMå®‰è£…æ…¢çš„é—®é¢˜ï¼‰ã€‚\nå…è®¸å®‰è£…packagesæ—¶æ‰§è¡Œä»£ç ï¼ŒåŸ‹ä¸‹å®‰å…¨éšæ‚£ã€‚\nå®‰è£…packagesçš„ç‰ˆæœ¬ä¸å¤Ÿç¨³å®šç­‰ã€‚\n\nä¸ºå¼¥è¡¥å­˜åœ¨éƒ¨åˆ†ç¼ºé™·çš„NPMï¼Œfacebookå’ŒExponentã€Googleå’ŒTildeä¸€èµ·æ‰“é€ NPMçš„æ›¿ä»£ç‰ˆæœ¬Yarnã€‚","text":"ç®€ä»‹2016å¹´10æœˆ11æ—¥ï¼Œfacebookå‘å¸ƒæ–°çš„æ¨¡å—ç®¡ç†å·¥å…·Yarnã€‚éšç€NPMçš„å¹¿æ³›ä½¿ç”¨ä¸­ï¼Œå¼€å§‹å‡ºç°å®‰å…¨æ€§å’Œæ€§èƒ½ä¸è¶³çš„é—®é¢˜ï¼Œå¦‚ï¼š å®‰è£…é€Ÿåº¦æ…¢ï¼ˆè™½ç„¶æ·˜å®NPMé•œåƒè§£å†³äº†å›½å†…ä¸‹è½½æ…¢çš„ç°è±¡ï¼Œä½†æ˜¯ä¸å¯å¦è®¤ä½¿ç”¨NPMå®‰è£…æ…¢çš„é—®é¢˜ï¼‰ã€‚ å…è®¸å®‰è£…packagesæ—¶æ‰§è¡Œä»£ç ï¼ŒåŸ‹ä¸‹å®‰å…¨éšæ‚£ã€‚ å®‰è£…packagesçš„ç‰ˆæœ¬ä¸å¤Ÿç¨³å®šç­‰ã€‚ ä¸ºå¼¥è¡¥å­˜åœ¨éƒ¨åˆ†ç¼ºé™·çš„NPMï¼Œfacebookå’ŒExponentã€Googleå’ŒTildeä¸€èµ·æ‰“é€ NPMçš„æ›¿ä»£ç‰ˆæœ¬Yarnã€‚ Yarn vs NPMyarn.lockNPMå’ŒYarnéƒ½æ˜¯é€šè¿‡package.jsonæ‹‰å–ä¾èµ–çš„æ¨¡å—ï¼Œä»¥ä¸‹æ˜¯æ‹‰å–æ¨¡å—çš„ç‰ˆæœ¬å·è§„åˆ™ï¼ˆä»¥1.2.2ä¸ºä¾‹ï¼‰ï¼š æŒ‡å®šç‰ˆæœ¬å·ï¼ˆ1.2.2ï¼‰ï¼šåªå®‰è£…æŒ‡å®šç‰ˆæœ¬ æ³¢æµªå·ï¼‹ç‰ˆæœ¬å·ï¼ˆ~1.2,2ï¼‰ï¼šå®‰è£…1.2.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº1.2.2ï¼‰ æ’å…¥å·ï¼‹ç‰ˆæœ¬å·ï¼ˆ^1.2.2ï¼‰ï¼šå®‰è£…1.x.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº1.2.2ï¼‰ å½“æ‰§è¡Œnpm install [package] --saveæ—¶ï¼Œé»˜è®¤saveçš„æ˜¯æ’å…¥å·çš„æ–¹å¼ï¼Œè¡¨ç¤ºå½“å‰çš„æ¨¡å—è‡³å¤šæ˜¯å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢æˆ–é—®é¢˜ä¿®æ­£ã€‚è™½ç„¶èƒ½å¤Ÿæ‰‹åŠ¨æ”¹æˆå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„æ–¹å¼ï¼Œä½†ä¹Ÿä¸èƒ½ç¡®å®šå½“å‰æ¨¡å—ä¾èµ–çš„æ¨¡å—æ˜¯å¦æ˜¯å›ºå®šçš„ï¼Œä¹Ÿå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ¨¡å—éƒ½èƒ½æŒ‰ç…§è¿™æ ·çš„æ–¹å¼æ¥æ›´æ–°å‘å¸ƒï¼Œå› æ­¤æ¯æ¬¡å®‰è£…éƒ½æœ‰å¯èƒ½ä¼šæ‹‰å–åˆ°ä¸€ä»½ç‰ˆæœ¬ä¸å›ºå®šçš„æ¨¡å—ï¼Œè¿™ä¸ªä¸ç¨³å®šæ€§æ˜¯ä¸€ä¸ªæå¤§çš„éšæ‚£ã€‚ yarn.locké”å®šæ–‡ä»¶è§£å†³äº†ä»¥ä¸Šçš„é—®é¢˜ï¼Œåœ¨æ‰§è¡Œyarnå®‰è£…å‘½ä»¤æ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œç¡®åˆ‡çš„è®°å½•å®‰è£…æ¨¡å—çš„ç‰ˆæœ¬å·ã€‚åŒæ ·NPMä¸­å­˜åœ¨ç›¸ä¼¼çš„npm-shrinkwrap.jsonï¼Œéœ€è¦é€šè¿‡æ‰§è¡Œ npm shrinkwrap æ‰‹åŠ¨ç”Ÿæˆã€‚å¯¹æ¯”ä¹‹ä¸‹åœ¨æ•°æ®æ ¼å¼ä¸Šyarn.lockæ›´ä¸ºç²¾ç®€æ¸…æ™°ã€‚ æ›´å¿«çš„æ¨¡å—ä¸‹è½½yarnä¸‹è½½æ—¶ä¼šè¿›è¡Œæ›´å¥½çš„æ’åºï¼Œæœ€å¤§é™åº¦çš„æé«˜ç½‘ç»œåˆ©ç”¨ç‡ï¼Œä¸”å®‰è£…è¿‡ç¨‹ä¸­å¦‚æœç½‘ç»œè¯·æ±‚å¤±è´¥ä¼šè¿›è¡Œè‡ªåŠ¨é‡è¯•ã€‚ ä»¥ä¸‹è½½gruntä¸ºä¾‹ï¼Œyarnè€—æ—¶13.52sï¼ŒNPMç¬¬ä¸€æ¬¡å°è¯•è¶…è¿‡ä¸€åˆ†é’Ÿï¼Œå†æ¬¡å°è¯•åœ¨40så·¦å³ã€‚ï¼ˆä»¥ä¸Šæ•°æ®è·Ÿå½“å‰ç½‘ç»œçŠ¶å†µæœ‰ç›¸å¯¹å¯†åˆ‡å…³ç³»ï¼Œä¸ºå¢åŠ å®éªŒå¯ä¿¡åº¦ï¼Œåœ¨å¤šæ¬¡å°è¯•ä¸åŒçš„æ¨¡å—çš„ä¹‹åï¼Œyarnéƒ½æœ‰ç›¸å¯¹ä¼˜å¼‚çš„ä¸‹è½½é€Ÿåº¦ï¼‰ é™¤æ­¤ï¼Œyarnè¿˜æ”¯æŒç¦»çº¿ä¸‹è½½ï¼Œå‰ææ˜¯ä¹‹å‰ä¸‹è¿‡è¿™ä¸ªåŒ…ã€‚ å¯¹äºå®‰è£…ä¸€æ•´ä¸ªé¡¹ç›®yarnçš„é€Ÿåº¦è¿˜æ˜¯éœ€è¦æå‡ï¼Œä½†æ˜¯åŒæ ·ä¹Ÿå¯ä»¥ç»™yarnè®¾ç½®å®‰è£…æºï¼š1$ yarn config set registry &apos;https://registry.npm.taobao.org&apos; æ›´ç®€æ´çš„è¾“å‡ºyarnçš„è¾“å‡ºä¿¡æ¯æ·»åŠ äº†ä¸€äº›emojiè¡¨æƒ…ğŸ˜„ï¼Œä¿¡æ¯ç®€å•æ˜äº†ï¼ŒNPMçš„è¾“å‡ºç›¸å¯¹å†—é•¿ã€‚ æ›´å¤šä¿¡æ¯ï¼šmigrating-from-npm ä½¿ç”¨å®‰è£…123456// ç”¨Homebrewå®‰è£…$ brew update$ brew install yarn// ç”¨NPMå®‰è£…$ npm install yarn -g CLIå®‰è£…ä¾èµ–å®‰è£…package.jsonçš„ä¾èµ–123$ yarnor$ yarn install æœ¬åœ°å®‰è£…æŸä¸ªæ¨¡å—ä¾èµ–12345$ yarn add [package] -&gt;$ npm install [package] --save$ yarn add [package] [--dev/-D]-&gt;$ npm install --save-dev [package] å…¨å±€å®‰è£…12$ yarn global add [package]-&gt;$ npm install [--global/-g] [package] åˆ é™¤ä¾èµ–12$ yarn remove [package]-&gt;$ npm uninstall --save [package] å‡çº§ä¾èµ–æ ¹æ®package.jsonæ–‡ä»¶é‡æ–°å®‰è£…åˆ°å½“å‰é…ç½®çš„æœ€æ–°ç‰ˆæœ¬12$ yarn upgrade-&gt;$ rm -rf node_modules &amp;&amp; npm install æ›´å¤šä¸NPMçš„CLIå¯¹æ¯”ï¼šcli-commands-comparisonæ›´å¤šCLIä»‹ç»ï¼šcli-introduction å…¶ä»–æé†’ä¸€ä¸‹ï¼Œå½“å¼€å§‹ä½¿ç”¨yarnè¦è®°å¾—å°†yarn.lockæ–‡ä»¶ä¸€èµ·æ”¾è¿›ä»£ç ä»“åº“ä¸­åˆ†äº«ç»™å°ä¼™ä¼´ï¼Œè¿™æ˜¯å‡†ç¡®å®‰è£…çš„ä¿è¯ã€‚ æ€»ç»“å¥½åƒä¸€æ•´ç¯‡æ–‡ç« éƒ½åœ¨èµæ‰¬yarnè´¬ä½NPMï¼Œä½†æ˜¯ä¸€ä¸ªä¸œè¥¿åšå‡ºæ¥è¦è®©å¤§ä¼—æ¥å—åŠ¿å¿…è¦æ¯”å‰è€…æ›´åŠ ä¼˜ç§€ã€‚NPMçš„å¼ºå¤§éƒ½è§è¯†è¿‡äº†ï¼Œä½†é—®é¢˜ä¹Ÿæ˜¯æ¥è¸µè€Œè‡³ï¼Œyarnå¯¹æ­¤åšäº†å¾ˆå¤šçš„æ”¹å–„ï¼Œä½†æ˜¯ç›®å‰çœ‹åˆ°yarnçš„issueä¹Ÿæ˜¯ä¸æ–­ï¼Œæ¯•ç«Ÿæ˜¯æ–°ä¸œè¥¿ï¼Œè¿˜éœ€è¦æ—¶é—´çš„æ²‰æ·€ğŸ˜„ã€‚","raw":null,"content":null,"categories":[{"name":"yarn","slug":"yarn","permalink":"http://yoursite.com/categories/yarn/"},{"name":"npm","slug":"yarn/npm","permalink":"http://yoursite.com/categories/yarn/npm/"},{"name":"å·¥å…·","slug":"yarn/npm/å·¥å…·","permalink":"http://yoursite.com/categories/yarn/npm/å·¥å…·/"}],"tags":[{"name":"é™ˆå°é¥¼","slug":"é™ˆå°é¥¼","permalink":"http://yoursite.com/tags/é™ˆå°é¥¼/"},{"name":"Yarn","slug":"Yarn","permalink":"http://yoursite.com/tags/Yarn/"},{"name":"NPM","slug":"NPM","permalink":"http://yoursite.com/tags/NPM/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://yoursite.com/tags/å·¥å…·/"}]},{"title":"XMLHttpRequest","slug":"XMLHttpRequest","date":"2016-12-30T02:28:11.000Z","updated":"2017-01-24T07:41:20.000Z","comments":true,"path":"20161230/XMLHttpRequest/","link":"","permalink":"http://yoursite.com/20161230/XMLHttpRequest/","excerpt":"","text":"Ajax &amp; XMLHttpRequestajaxæ˜¯ä¸€ç§æŠ€æœ¯æ–¹æ¡ˆ,å®ƒä¾èµ–çš„æ˜¯ç°æœ‰çš„HTML/CSS/Javascript,è€Œå…¶ä¸­æœ€æ ¸å¿ƒçš„ä¾èµ–æ˜¯æµè§ˆå™¨æä¾›çš„XMLHttpRequestå¯¹è±¡,æ˜¯è¿™ä¸ªå¯¹è±¡ä½¿å¾—æµè§ˆå™¨å¯ä»¥å‘å‡ºHTTPè¯·æ±‚å’Œæ¥æ”¶HTTPå“åº”ã€‚å³ç”¨XMLHttpRequestå¯¹è±¡æ¥å‘é€ä¸€ä¸ªAjaxè¯·æ±‚ã€‚ XMLHttpRequestå‘å±•å†ç¨‹level1ç¼ºç‚¹ï¼š åªæ”¯æŒæ–‡æœ¬æ•°æ®çš„ä¼ é€ï¼Œæ— æ³•ç”¨æ¥è¯»å–å’Œä¸Šä¼ äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä¼ é€å’Œæ¥æ”¶æ•°æ®æ—¶ï¼Œæ²¡æœ‰è¿›åº¦ä¿¡æ¯ï¼Œåªèƒ½æç¤ºæœ‰æ²¡æœ‰å®Œæˆã€‚ å—åˆ°â€åŒåŸŸé™åˆ¶â€ï¼Œåªèƒ½å‘åŒä¸€åŸŸåçš„æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚ level2æ”¹è¿›ç‚¹ï¼š å¯ä»¥è®¾ç½®HTTPè¯·æ±‚çš„æ—¶é™ã€‚ å¯ä»¥ä½¿ç”¨FormDataå¯¹è±¡ç®¡ç†è¡¨å•æ•°æ®ã€‚ å¯ä»¥ä¸Šä¼ æ–‡ä»¶ã€‚ å¯ä»¥è¯·æ±‚ä¸åŒåŸŸåä¸‹çš„æ•°æ®ï¼ˆè·¨åŸŸè¯·æ±‚ï¼‰ã€‚ å¯ä»¥è·å–æœåŠ¡å™¨ç«¯çš„äºŒè¿›åˆ¶æ•°æ®ã€‚ å¯ä»¥è·å¾—æ•°æ®ä¼ è¾“çš„è¿›åº¦ä¿¡æ¯ã€‚ XMLHttpRequestä½¿ç”¨1234567891011121314151617181920212223function sendAjax(data) &#123; // åˆ›å»ºxhrå¯¹è±¡ var xhr = new XMLHttpRequest(); // è®¾ç½®xhrè¯·æ±‚çš„è¶…æ—¶æ—¶é—´ xhr.timeout = 3000; // è®¾ç½®å“åº”è¿”å›çš„è¶…æ—¶æ—¶é—´ xhr.responseType = &apos;text&apos;; // åˆ›å»ºä¸€ä¸ªpostè¯·æ±‚,é‡‡ç”¨å¼‚æ­¥ xhr.open(&apos;POST&apos;, &apos;/server&apos;, true); // æ³¨å†Œç›¸å…³äº‹ä»¶å›è°ƒå¤„ç†å‡½æ•° xhr.onload = function(e)&#123; if(this.status == 200 || this.status == 304)&#123; alert(this.responseText); &#125; &#125;; xhr.ontimeout = function(e) &#123;&#125; xhr.onerror = function(e) &#123;&#125; xhr.upload.onprogress = function(e) &#123;&#125; // å‘é€æ•°æ® xhr.send(data);&#125;","raw":null,"content":null,"categories":[{"name":"http","slug":"http","permalink":"http://yoursite.com/categories/http/"}],"tags":[{"name":"http","slug":"http","permalink":"http://yoursite.com/tags/http/"}]},{"title":"React Lifecycle","slug":"react-lifecycle","date":"2016-12-29T07:25:08.000Z","updated":"2017-01-24T07:41:37.000Z","comments":true,"path":"20161229/react-lifecycle/","link":"","permalink":"http://yoursite.com/20161229/react-lifecycle/","excerpt":"","text":"ç”Ÿå‘½å‘¨æœŸMore Info: Component Specs and Lifecycle ç»„ä»¶æ¸²æŸ“ç»å†çš„ç”Ÿå‘½å‘¨æœŸç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼š getDefaultProps getInitialState componentWillMount render componentDidMount ç¬¬äºŒæ¬¡æ¸²æŸ“ï¼š getInitialState componentWillMount render componentDidMount Propsæ”¹å˜æ—¶ï¼š componentWillReceiveProps shouldComponentUpdate componentWillUpdate render componentDidUpdate Stateæ”¹å˜æ—¶ï¼š shouldComponentUpdate componentWillUpdate render componentDidUpdate ç»„ä»¶å¸è½½æ—¶ï¼š componentWillUnmont","raw":null,"content":null,"categories":[{"name":"react","slug":"react","permalink":"http://yoursite.com/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"http://yoursite.com/tags/react/"}]}]}