{"meta":{"title":"ChenAibing | Blog","subtitle":null,"description":null,"author":"Chen Aibing","url":"http://yoursite.com"},"pages":[{"title":"about","date":"2017-01-24T03:11:26.000Z","updated":"2017-01-24T03:11:26.000Z","comments":true,"path":"about/index.html","permalink":"http://yoursite.com/about/index.html","excerpt":"","text":"","raw":null,"content":null}],"posts":[{"title":"Hybridæ¡†æ¶","slug":"Hybridæ¡†æ¶","date":"2017-04-05T02:34:12.000Z","updated":"2017-04-10T03:14:18.000Z","comments":true,"path":"20170405/Hybridæ¡†æ¶/","link":"","permalink":"http://yoursite.com/20170405/Hybridæ¡†æ¶/","excerpt":"Cordova &amp; PhoneGap å…¥é—¨Apacha Cordovaæ˜¯å¼€æºçš„ç§»åŠ¨å¼€å‘æ¡†æ¶ï¼Œå…è®¸ä½¿ç”¨HTML/CSS/JavaScriptè¿›è¡Œè·¨å¹³å°å¼€å‘ã€‚Apacha Cordovaæ˜¯ä»PhoneGapä¸­æŠ½å‡ºçš„æ ¸å¿ƒä»£ç ï¼Œæ˜¯é©±åŠ¨PhoneGapçš„æ ¸å¿ƒå¼•æ“ã€‚ç›®å‰è·¨å¹³å°å¼€å‘ç¦»ä¸å¼€PhoneGap/Cordovaï¼Œæ‰€ä»¥æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹ã€‚\n\nYou can think of Apache Cordova as the engine that powers PhoneGap, similar to how WebKit is the engine that powers Chrome or Safari. \n\næ¨èé˜…è¯»ï¼šPhoneGap, Cordova, and whatâ€™s in a name?","text":"Cordova &amp; PhoneGap å…¥é—¨Apacha Cordovaæ˜¯å¼€æºçš„ç§»åŠ¨å¼€å‘æ¡†æ¶ï¼Œå…è®¸ä½¿ç”¨HTML/CSS/JavaScriptè¿›è¡Œè·¨å¹³å°å¼€å‘ã€‚Apacha Cordovaæ˜¯ä»PhoneGapä¸­æŠ½å‡ºçš„æ ¸å¿ƒä»£ç ï¼Œæ˜¯é©±åŠ¨PhoneGapçš„æ ¸å¿ƒå¼•æ“ã€‚ç›®å‰è·¨å¹³å°å¼€å‘ç¦»ä¸å¼€PhoneGap/Cordovaï¼Œæ‰€ä»¥æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹ã€‚ You can think of Apache Cordova as the engine that powers PhoneGap, similar to how WebKit is the engine that powers Chrome or Safari. æ¨èé˜…è¯»ï¼šPhoneGap, Cordova, and whatâ€™s in a name? Cordovaä½¿ç”¨ å…¨å±€å®‰è£…cordovaã€‚ 123456$ sudo npm install -g cordova``` - ç”¨cordovaåˆ›å»ºé¡¹ç›®ã€‚```code$ cordova create hello com.example.hello HelloWorld å¢åŠ å¹³å°platformsã€‚ 12345$ cordova platform add ios --save$ cordova platform add android --save// æŸ¥çœ‹å¹³å°$ cordova platform ls å®‰è£…æ„å»ºé¡¹ç›®çš„ç¯å¢ƒï¼ŒæŸ¥çœ‹ç¯å¢ƒè¦æ±‚ï¼Œä¹‹åæŒ‰ç…§æ­¥éª¤æ­å»ºèµ·æ¥ã€‚ 1234567891011121314$ cordova requirements&gt;&gt;Requirements check results for android:Java JDK: installed 1.8.0Android SDK: installed trueAndroid target: installed android-25Gradle: installed Requirements check results for ios:Apple OS X: installed darwinXcode: installed 8.1ios-deploy: installed 1.9.1CocoaPods: installed æ„å»ºé¡¹ç›®ã€‚ 123$ cordova build // æˆ–å•ç‹¬æŸä¸ªå¹³å°å¦‚IOS$ cordova build ios å®‰è£…cordovaæ’ä»¶ã€‚ 123$ cordova plugin add cordova-plugin-camera// æŸ¥çœ‹é¡¹ç›®æ’ä»¶$ cordova plugin ls é‡è¦æ’ä»¶åœ°å€: core-plugin-apisæ›´å¤šå…¶ä»–æ’ä»¶: plugreg åˆ›å»ºæ’ä»¶æ’ä»¶å¿…é¡»é…ç½®plugin.xmlæ–‡ä»¶ï¼Œidè¡¨ç¤ºæ’ä»¶åï¼Œplatformå¯¹åº”å½“å‰é…ç½®çš„å¹³å°ï¼Œjs-moduleå¯¹åº”Javascriptæ–‡ä»¶è·¯å¾„ï¼Œheader-fileå’Œsource-fileåˆ†åˆ«å¯¹åº”.hå’Œ.mæ–‡ä»¶ã€‚å…·ä½“å‚æ•°å¯ä»¥å‚è€ƒ: plugin.xml1$ cordova plugin add https://git-wip-us.apache.org/repos/asf/cordova-plugin-device.git å¯ä»¥é€šè¿‡plugmanæ£€éªŒå½“å‰æ’ä»¶æ˜¯å¦èƒ½æ­£ç¡®å®‰è£…åˆ°å„ä¸ªå¹³å°ã€‚12$ npm install -g plugman$ plugman install --platform ios --project /path/to/my/project/www --plugin /path/to/my/plugin å¦‚æœè¦å†™ä¸€ä¸ªå…¼å®¹Android/IOSçš„æ’ä»¶ï¼Œéœ€è¦ä¼šä¸åŒå¹³å°çš„è¯­è¨€ï¼Œè¿˜æ˜¯æœ‰ç‚¹æŒ‘æˆ˜çš„ã€‚å…·ä½“çš„å¼€å‘æ–¹å¼å¯ä»¥å‚ç…§å®˜ç½‘ã€‚å‘å¸ƒç›´æ¥é€šè¿‡npmçš„æ–¹å¼npm publishçš„æ–¹å¼å³å¯ï¼Œè®°å¾—åœ¨å‘å¸ƒä¹‹å‰æ–°å»ºpackage.jsonæ–‡ä»¶è®°å½•æ’ä»¶çš„å„ç±»ä¿¡æ¯ã€‚ PhoneGapPhoneGapæä¾›äº†æ¡Œé¢åº”ç”¨å’Œé€šè¿‡phonegap cliæ¥åˆ›å»º/æ“ä½œé¡¹ç›®ï¼ŒåŒæ—¶æä¾›äº†ç§»åŠ¨ç«¯çš„è°ƒè¯•å·¥å…·ï¼Œé€šè¿‡wifiè¿æ¥å³å¯ã€‚ ä½¿ç”¨ å…¨å±€å®‰è£…phonegapã€‚ 1$ npm install -g phonegap@latest åˆ›å»ºé¡¹ç›®ï¼Œé€šè¿‡å®¢æˆ·ç«¯åˆ›å»ºç›¸å¯¹ä¼šæ…¢å¾ˆå¤šï¼Œä¸æŒ‡å®šæ¨¡æ¿é»˜è®¤phonegap-template-hello-worldã€‚ 123456$ phonegap create myApp&gt;&gt;Creating a new cordova project.Using cordova-fetch for phonegap-template-hello-world å¢åŠ å¹³å°platformså’Œæ’ä»¶pluginçš„å‘½ä»¤å’Œcordovaç±»ä¼¼ï¼Œç›´æ¥ç”¨cordovaå‘½ä»¤ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½†åœ¨phonegapé¡¹ç›®ä¸­åœ¨æ‰§è¡Œæ·»åŠ å¹³å°çš„å‘½ä»¤ä¼šæ·»åŠ å¾ˆå¤šçš„å¸¸ç”¨çš„æ’ä»¶ï¼Œéœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯å¾ˆå¤§ç¨‹åº¦çœå»äº†å®‰è£…æ’ä»¶çš„æ“ä½œã€‚ 123$ phonegap platform add ios$ phonegap plugin add cordova-plugin-device å°†é¡¹ç›®æ‹–æ‹½åˆ°phonegapå®¢æˆ·ç«¯ç•Œé¢ï¼Œå¯è‡ªå®šä¹‰æœåŠ¡çš„ç«¯å£ï¼Œç„¶åæ‰‹æœºç«¯è¿æ¥é¡¹ç›®æŸ¥çœ‹æ•ˆæœã€‚æˆ–è€…é€šè¿‡cliå¼€å¯æœåŠ¡ï¼Œä¸éœ€è¦å®‰è£…å¹³å°(ios/android/.etc)çš„ä¾èµ–å°±å¯ä»¥ç›´æ¥çœ‹åˆ°æ•ˆæœã€‚ 1234$ phonegap serve// é»˜è®¤ç«¯å£3000ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ”¹å˜ç«¯å£å¹¶å¼€å¯æœåŠ¡phonegap serve --port, -p &lt;n&gt; è°ƒç”¨æ’ä»¶ï¼Œä»¥æ‹ç…§ä¸ºä¾‹ã€‚ 1234567891011121314151617// html&lt;div id=&quot;camera&quot;&gt;æ‹ç…§&lt;div&gt;// JavaScript// æ’ä»¶è°ƒç”¨éƒ½ä»¥ `navigator.æ’ä»¶å.æ–¹æ³•`var camera = document.getElementById(&apos;camera&apos;);camaraButton.addEventListener(&apos;click&apos;, function()&#123; navigator.camera.getPicture(onLoadImageSuccess, onLoadImageFail);&#125;, false);function onLoadImageSuccess(imageURI)&#123; // æˆåŠŸè¿”å›å›¾ç‰‡åœ°å€ alert(imageURI);&#125;function onLoadImageFail(message)&#123; // å¤±è´¥è¿”å›é”™è¯¯åŸå›  navigator.notification.alert(&quot;æ‹ç…§å¤±è´¥ï¼ŒåŸå› ï¼š&quot; + message, null, &quot;è­¦å‘Š&quot;);&#125; ä¸»æµHybridæ¡†æ¶å¯¹æ¯”OnsenUIæä¾›Angular 1, 2, React å’Œ Vue.jsæ¡†æ¶çš„ç§»åŠ¨ç«¯å¼€å‘ï¼Œè¿˜éœ€è¦é…åˆPhoneGap/Cordovaå®ç°è·¨å¹³å°å¼€å‘ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/OnsenUI/OnsenUI ä¼˜åŠ¿ï¼š æ–‡æ¡£å®Œå–„ï¼Œæä¾›ä¸°å¯Œçš„ç¤ºä¾‹ã€‚ æä¾›è¾ƒå¤šçš„é¢„å®šä¹‰ç»„ä»¶ï¼Œå¦‚Gridã€Dialogã€Formç­‰å¸¸ç”¨ç»„ä»¶ã€‚ æä¾›2å¥—æ ·å¼ï¼Œæ”¯æŒMaterial Designã€‚ æä¾›monacaè„šæ‰‹æ¶ï¼Œè®©é¡¹ç›®æ­å»ºæ›´æ–¹ä¾¿ã€‚ å¤šæ¡†æ¶è¯­è¨€çš„æ”¯æŒï¼šReactã€Angular1/2ã€Vue2ã€Meteorã€‚ æŒç»­ç»´æŠ¤ï¼Œæ›´æ–°åŠæ—¶ã€‚ åŠ£åŠ¿ï¼š ä¸åŒ…å«ä½†æ”¯æŒPhoneGap/Cordovaæ„å»ºã€‚ æ¨èæŒ‡æ•°ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ Ionicä½¿ç”¨Angularæ„å»ºè·¨å¹³å°appã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/driftyco/ionic ä¼˜åŠ¿ï¼š æä¾›Creatoréä»£ç ç¯å¢ƒæ‹–æ‹½ç»„ä»¶æ„å»ºAppã€‚ æä¾›ä¸°å¯Œçš„é¢„å®šä¹‰ç»„ä»¶ï¼Œå¦‚Gridã€Modalsã€Inputã€Menusç­‰ç»„ä»¶ã€‚ æä¾›ä¸åŒå¹³å°çš„æ ·å¼é€‰æ‹©å’Œä¿®æ”¹æ–¹å¼ï¼Œæ”¯æŒMaterial Designã€‚ å®Œå–„çš„æ–‡æ¡£ï¼Œåºå¤§çš„ç¤¾åŒºã€‚ åŠ£åŠ¿ï¼š å¿…é¡»ä¼šä½¿ç”¨AngularJSå»å®Œæˆå¤æ‚çš„å¼€å‘ã€‚ æ¨èæŒ‡æ•°ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ Framework 7å…¨åŠŸèƒ½çš„HTMLæ¡†æ¶ï¼Œç”¨äºæ„å»ºiOSå’ŒAndroidåº”ç”¨ç¨‹åºã€‚é’ˆå¯¹IOSçš„UIè®¾è®¡ï¼Œå¦‚æœè¦å…¼å®¹Androidéœ€è¦å¦å¤–ä½¿ç”¨PhoneGap/Cordovaã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/nolimits4web/Framework7/ ä¼˜åŠ¿ï¼š ä¸°å¯Œçš„ç¤ºä¾‹ã€æ•™ç¨‹ï¼Œå®¹æ˜“ä¸Šæ‰‹ã€‚ ä¸°å¯Œçš„ç»„ä»¶å’Œæ’ä»¶ã€‚ èƒ½å¤Ÿè½»æ˜“å’Œjsæ¡†æ¶é…åˆä½¿ç”¨ï¼Œå¦‚Reactã€Vueã€‚ åŠ£åŠ¿ï¼š ä¸åŒ…å«ä½†æ”¯æŒPhoneGap/Cordovaæ„å»ºã€‚ æ²¡æœ‰æä¾›è„šæ‰‹æ¶ï¼Œåªæä¾›äº†æœ€åŸºç¡€çš„æœåŠ¡ã€‚ æ¨èæŒ‡æ•°ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸ React Nativeç”¨Reactæ„å»ºè·¨åŸç”Ÿappï¼Œå’ŒPhoneGap/CordovåŸç†ä¸ä¸€æ ·ï¼Œæ€§èƒ½è¡¨ç°æ›´æµç•…ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/facebook/react-native ä¼˜åŠ¿ï¼š ä»¿åŸç”Ÿçš„è¡¨ç°ï¼Œç›¸å¯¹æµç•…ã€‚ åºå¤§çš„ç¤¾åŒºã€‚ åŠ£åŠ¿ï¼š å­¦ä¹ æ›²çº¿é™¡ï¼Œéœ€è¦é€‚å½“å­¦ä¹ å®¢æˆ·ç«¯å¼€å‘ã€‚ è·¨å¹³å°çš„å…¼å®¹æ€§æœ‰å¾…è€ƒç©¶ã€‚ æ¨èæŒ‡æ•°ï¼šğŸŒŸğŸŒŸğŸŒŸ æ€»ç»“ç¨å¾®æ™®åŠäº†PhoneGap/Cordovaï¼Œæ˜¯ç›®å‰æ¯”è¾ƒæˆç†Ÿå’Œç¨³å®šçš„å®ç°ç”¨JavaScriptå¼€å‘çš„Hybridæ¡†æ¶ï¼Œä½†æ˜¯ç”±äºè¿˜æ˜¯é€šè¿‡WebViewå»å±•ç°ï¼Œæ‰€ä»¥åœ¨æ€§èƒ½æ–¹é¢è¿˜æ˜¯ä¸å¦‚åŸç”ŸNativeæ¥çš„æµç•…ã€‚ å¯¹æ¯”å½“ä¸­æ··å…¥äº†React Nativeï¼Œå…¶å®ç°åŸç†å’ŒPhoneGap/Cordovaæ²¡ä»€ä¹ˆå¤ªå¤§å…³ç³»ã€‚ç›®å‰å¾ˆå¤šäººç”¨React Nativeå¼€å‘é¡¹ç›®ï¼Œä»å…¥é—¨åˆ°æ”¾å¼ƒï¼Œç›®å‰è¿˜æœ‰å¤ªå¤šå…¼å®¹æ€§å’Œéœ€è¦è‡ªå®šä¹‰çš„éƒ¨åˆ†ï¼Œå¼€å‘æˆæœ¬æ¯”é¢„æœŸè¦æ¥çš„é«˜ï¼Œè¦æ±‚å¼€å‘è€…ä¸ä»…ä¼šWebçš„æŠ€æœ¯ï¼Œè¿˜éœ€è¦IOSï¼Androidçš„æŠ€æœ¯ã€‚","raw":null,"content":null,"categories":[],"tags":[{"name":"é™ˆå°é¥¼","slug":"é™ˆå°é¥¼","permalink":"http://yoursite.com/tags/é™ˆå°é¥¼/"},{"name":"hybrid","slug":"hybrid","permalink":"http://yoursite.com/tags/hybrid/"}]},{"title":"webpackæ€§èƒ½ä¼˜åŒ–","slug":"webpackæ€§èƒ½ä¼˜åŒ–","date":"2017-03-30T02:50:20.000Z","updated":"2017-04-04T13:11:49.000Z","comments":true,"path":"20170330/webpackæ€§èƒ½ä¼˜åŒ–/","link":"","permalink":"http://yoursite.com/20170330/webpackæ€§èƒ½ä¼˜åŒ–/","excerpt":"Webpackæ˜¯å‰ç«¯æ¨¡å—åŠ è½½åŠèµ„æºæ‰“åŒ…å·¥å…·ã€‚\n\nwebpack takes modules with dependencies and generates static assets representing those modules.\n\nä¸ºä»€ä¹ˆè¦ä¼˜åŒ–?éšç€Webpackçš„æ™®éï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…åæ˜ æ„å»ºæ…¢ã€bundleåŒ…å¤§ç­‰é—®é¢˜ã€‚è™½ç„¶Webpackå¯ä»¥é€šè¿‡ç®€å•çš„é…ç½®å®Œæˆçç¢çš„æ–‡ä»¶ç¼–è¯‘ã€æ‰“åŒ…ï¼Œä½†æ˜¯å¦‚æœæ¯æ¬¡æ”¹åŠ¨åˆ°çœ‹åˆ°æ•ˆæœã€æ¯æ¬¡æ‰“åŒ…å®Œæˆéƒ½éœ€è¦æ¶ˆè€—å¤§é‡çš„æ—¶é—´ï¼Œæœ€ç»ˆæ¢æ¥ä¸€ä¸ªæˆ–å¤šä¸ªä½“ç§¯å·¨å¤§çš„jsæ–‡ä»¶ï¼Œå¼€å‘è€…å¯¹Webpackå¯èƒ½ä¼šæ¸æ¸å¤±å»ä¿¡å¿ƒï¼Œæ‰€ä»¥äº†è§£Webpackæ€§èƒ½ä¼˜åŒ–åœ¨æ‰€éš¾å…ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªä¸šåŠ¡é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬éœ€è¦å¦‚babelçš„ç¼–è¯‘åŒ…ï¼Œå¦‚reactæˆ–å…¶ä»–çš„åº•å±‚æ¡†æ¶åŒ…ï¼Œå¦‚less/sassçš„æ ·å¼ç¼–è¯‘åŒ…ï¼Œå¦‚css/styleçš„æ ·å¼åŠ è½½åŒ…ï¼Œå¦‚æ–‡ä»¶åŠ è½½åŒ…ï¼Œå½“ç„¶è¿˜æœ‰webpackæœ¬èº«ï¼Œå¦‚æœé…åˆå…¶ä»–å·¥å…·è¿˜éœ€è¦gulp/gruntåŠå…¶æ’ä»¶åŒ…ï¼Œä¸ç®—æµ‹è¯•ç›¸å…³çš„æ¨¡å—å’Œé¡¹ç›®ä¸­ç”¨åˆ°çš„å…¶å®ƒæ¨¡å—ï¼Œæ—æ—æ€»æ€»æœ‰10+ä¸ªæ¨¡å—ã€‚èŠ±è´¹æ—¶é—´å¤šå¹¶ä¸æ˜¯æ¨¡å—å¤šè¿™ä¸ªäº‹å®ï¼Œè€Œæ˜¯å¤„ç†è¿‡ç¨‹ä¸­ä¸åŒçš„æ¨¡å—å¯¹ä¸åŒç±»å‹ä¸”å¤§é‡çš„æ–‡ä»¶æœå¯»åŒ¹é…/ç¼–è¯‘/æ‰“åŒ…å·¥ä½œã€‚","text":"Webpackæ˜¯å‰ç«¯æ¨¡å—åŠ è½½åŠèµ„æºæ‰“åŒ…å·¥å…·ã€‚ webpack takes modules with dependencies and generates static assets representing those modules. ä¸ºä»€ä¹ˆè¦ä¼˜åŒ–?éšç€Webpackçš„æ™®éï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…åæ˜ æ„å»ºæ…¢ã€bundleåŒ…å¤§ç­‰é—®é¢˜ã€‚è™½ç„¶Webpackå¯ä»¥é€šè¿‡ç®€å•çš„é…ç½®å®Œæˆçç¢çš„æ–‡ä»¶ç¼–è¯‘ã€æ‰“åŒ…ï¼Œä½†æ˜¯å¦‚æœæ¯æ¬¡æ”¹åŠ¨åˆ°çœ‹åˆ°æ•ˆæœã€æ¯æ¬¡æ‰“åŒ…å®Œæˆéƒ½éœ€è¦æ¶ˆè€—å¤§é‡çš„æ—¶é—´ï¼Œæœ€ç»ˆæ¢æ¥ä¸€ä¸ªæˆ–å¤šä¸ªä½“ç§¯å·¨å¤§çš„jsæ–‡ä»¶ï¼Œå¼€å‘è€…å¯¹Webpackå¯èƒ½ä¼šæ¸æ¸å¤±å»ä¿¡å¿ƒï¼Œæ‰€ä»¥äº†è§£Webpackæ€§èƒ½ä¼˜åŒ–åœ¨æ‰€éš¾å…ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªä¸šåŠ¡é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬éœ€è¦å¦‚babelçš„ç¼–è¯‘åŒ…ï¼Œå¦‚reactæˆ–å…¶ä»–çš„åº•å±‚æ¡†æ¶åŒ…ï¼Œå¦‚less/sassçš„æ ·å¼ç¼–è¯‘åŒ…ï¼Œå¦‚css/styleçš„æ ·å¼åŠ è½½åŒ…ï¼Œå¦‚æ–‡ä»¶åŠ è½½åŒ…ï¼Œå½“ç„¶è¿˜æœ‰webpackæœ¬èº«ï¼Œå¦‚æœé…åˆå…¶ä»–å·¥å…·è¿˜éœ€è¦gulp/gruntåŠå…¶æ’ä»¶åŒ…ï¼Œä¸ç®—æµ‹è¯•ç›¸å…³çš„æ¨¡å—å’Œé¡¹ç›®ä¸­ç”¨åˆ°çš„å…¶å®ƒæ¨¡å—ï¼Œæ—æ—æ€»æ€»æœ‰10+ä¸ªæ¨¡å—ã€‚èŠ±è´¹æ—¶é—´å¤šå¹¶ä¸æ˜¯æ¨¡å—å¤šè¿™ä¸ªäº‹å®ï¼Œè€Œæ˜¯å¤„ç†è¿‡ç¨‹ä¸­ä¸åŒçš„æ¨¡å—å¯¹ä¸åŒç±»å‹ä¸”å¤§é‡çš„æ–‡ä»¶æœå¯»åŒ¹é…/ç¼–è¯‘/æ‰“åŒ…å·¥ä½œã€‚ å¦‚ä½•ä¼˜åŒ–?å‡å°‘å®‰è£…æ—¶é—´è¿™éƒ¨åˆ†è·ŸWebpackæ— å…³ï¼Œè·Ÿå¼€å‘è€…çš„åŒ…ç®¡ç†å·¥å…·å’Œä¾èµ–æ¨¡å—æœ‰å…³ã€‚ 1. åŒ…ç®¡ç†å·¥å…·npmç«äº†ä¸€é˜µä¹‹åå¼€å§‹è¢«å„ç§è¯Ÿç—…ï¼Œnpmå®¹æ˜“å¯¼è‡´åœ¨å¤šä¾èµ–å…³ç³»ä¸­æŸäº›ä¾èµ–æ²¡æœ‰æŒ‡å®šç‰ˆæœ¬å·ï¼Œå¯¼è‡´æ‹‰å–åˆ°çš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œ16å¹´10æœˆå‡ºäº†å¦ä¸€ä¸ªæ¨¡å—ç®¡ç†å·¥å…·Yarnï¼Œyarnå¯ä»¥ç¼“å­˜è£…è¿‡çš„åŒ…å®ç°ç¦»çº¿å®‰è£…ï¼Œå®‰è£…é€Ÿåº¦å¿«ï¼Œä¹Ÿè§£å†³äº†ç‰ˆæœ¬å·ä¸ç¡®å®šçš„é—®é¢˜ã€‚ å…·ä½“å…³äºyarnï¼šYarn-æ¨¡å—ç®¡ç†å·¥å…· 2. ä¾èµ–æ¨¡å—æ¯æ¬¡å¼€å‘å®Œæˆå¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯æ‰€æœ‰saveåˆ°package.jsonä»¥åŠimport/requireåˆ°æ–‡ä»¶ä¸­çš„æ¨¡å—éƒ½ç”¨åˆ°äº†ï¼Œå°½é‡å‡å°‘å¯é¿å…çš„æ—¶é—´æ¶ˆè€—å’Œä»£ç å†—ä½™ã€‚ é™¤æ­¤ï¼Œç¡®å®šæ”¾åœ¨dependenciesçš„ä¾èµ–æ˜¯å¦å¯ä»¥è½¬ç§»åˆ°devDependenciesä¸­æ”¾ç½®ï¼Œé¿å…å¢åŠ ä¸‹è½½åŒ…çš„å¤§å°ã€‚ å‡å°‘build&amp;rebuildæ—¶é—´å¼€å‘ä¸­ä¸€èˆ¬éƒ½ä¼šå¼€å¯watchçš„æ¨¡å¼ï¼Œæ¯ä¸€æ¬¡æ”¹åŠ¨å¯ä»¥å³æ—¶åæ˜ åˆ°æµè§ˆå™¨ä¸Šï¼Œè¿™éƒ¨åˆ†æ—¶é—´çš„æ¶ˆè€—æ˜¯è‡³å…³é‡è¦çš„ã€‚ 1. babel-loaderä¼˜åŒ– ç”¨excludeæˆ–includeé™åˆ¶babelç¼–è¯‘çš„æ–‡ä»¶èŒƒå›´ã€‚ babel-loaderå¯ä»¥ç¼“å­˜å¤„ç†è¿‡çš„æ¨¡å—ï¼ŒcacheDirectoryå¯¹äºæ²¡æœ‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶ä¸ä¼šå†é‡æ–°ç¼–è¯‘ã€‚ 12345&#123; test: /\\.jsx?$/, loaders: [&apos;react-hot&apos;, &apos;babel-loader?cacheDirectory&apos;], exclude: /node_modules/&#125; 2. resolve.root VS resolve.modulesDirectoriesrootæ˜¯åŒ…å«ä½ çš„æ¨¡å—çš„ç»å¯¹è·¯å¾„ï¼ŒmodulesDirectoriesæ˜¯ä¸€ä¸ªç›®å½•æ•°ç»„ï¼Œå°†è§£æå½“å‰ç›®å½•åŠç¥–å…ˆç›®å½•ï¼Œå› æ­¤ï¼Œåªæœ‰åœ¨å¦‚node_modulesçš„å¤æ‚è·¯å¾„ä¸‹è€ƒè™‘ä½¿ç”¨modulesDirectoriesï¼Œå¤§éƒ¨åˆ†æƒ…æ™¯ä¸‹ä½¿ç”¨rootå°±è¶³å¤Ÿäº†ã€‚12345resolve:&#123; root: path.resolve(__dirname, &apos;./src&apos;), modulesDirectories: [&apos;node_modules&apos;,&apos;bower_components&apos;], extensions: [&apos;&apos;, &apos;.js&apos;, &apos;.jsx&apos;]&#125; 3. resolve.aliasaliasæŠŠç”¨æˆ·çš„ä¸€ä¸ªè¯·æ±‚é‡å®šå‘åˆ°å¦ä¸€ä¸ªè·¯å¾„ï¼Œå‡å°‘è·¯å¾„æœç´¢çš„æˆæœ¬ã€‚12345resolve:&#123; alias: &#123; xyz: &quot;/absolute/path/to/file.js&quot; &#125;&#125; 4. module.noParsenoParseå¿½ç•¥å¯¹å·²çŸ¥æ–‡ä»¶çš„è§£æï¼Œç¡®å®šä¸€ä¸ªæ¨¡å—ä¸­æ²¡æœ‰å…¶å®ƒæ–°çš„ä¾èµ– å°±å¯ä»¥é…ç½®è¿™é¡¹ï¼Œwebpack å°†ä¸å†æ‰«æè¿™ä¸ªæ–‡ä»¶ä¸­çš„ä¾èµ–ã€‚123module:&#123; noParse:[/jquery/]&#125; 5. DLLPlugin &amp; DllReferencePluginDLLPluginé€šè¿‡å‰ç½®ä¾èµ–åŒ…çš„æ„å»ºï¼Œæ¥æé«˜æ„å»ºæ•ˆç‡ã€‚æ‰“åŒ…dllçš„æ—¶å€™ï¼ŒWebpackä¼šå°†æ‰€æœ‰åŒ…å«çš„åº“åšä¸€ä¸ªç´¢å¼•ï¼Œå†™åœ¨ä¸€ä¸ªmanifestæ–‡ä»¶ä¸­ï¼Œè€Œå¼•ç”¨dllçš„ä»£ç åœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œåªéœ€è¦è¯»å–è¿™ä¸ªmanifestæ–‡ä»¶å°±å¯ä»¥äº†ã€‚ Dllæ‰“åŒ…ä»¥åæ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œåªè¦å…¶åŒ…å«çš„åº“æ²¡æœ‰å¢å‡ã€å‡çº§ï¼Œhashä¹Ÿä¸ä¼šå˜åŒ–ï¼Œå› æ­¤çº¿ä¸Šçš„dllä»£ç ä¸éœ€è¦éšç€ç‰ˆæœ¬å‘å¸ƒé¢‘ç¹æ›´æ–°ã€‚ é¦–å…ˆæ–°å»ºä¸€ä¸ªdllçš„é…ç½®æ–‡ä»¶å¦‚webpack.dll.config.jsï¼ŒentryåªåŒ…å«ç¬¬ä¸‰æ–¹åº“ï¼š1234567891011121314151617module.exports = &#123; entry: &#123; // åªåŒ…å«éœ€è¦å•ç‹¬æ‰“åŒ…çš„ä¾èµ–åŒ… vendor: [&apos;react&apos;, &apos;react-dom&apos;, &apos;classnames&apos;] &#125;, output: &#123; path: path.join(process.cwd(),&apos;dist&apos;), filename: &apos;[name].[chunkhash].js&apos;, library: &apos;[name]_[chunkhash]&apos;, &#125;, plugins: [ new webpack.DllPlugin(&#123; path: &apos;manifest.json&apos;, name: &apos;[name]_[chunkhash]&apos;, context: __dirname, &#125;), ],&#125;; 1234567891011// manifest.json &#123; &quot;name&quot;: &quot;vendor_45a4e5523d37b29e930b&quot;, &quot;content&quot;: &#123; &quot;../node_modules/.npminstall/react/0.14.8/react/react.js&quot;: 1, &quot;../node_modules/.npminstall/react/0.14.8/react/lib/React.js&quot;: 2, ... &quot;../node_modules/.npminstall/react-dom/0.14.8/react-dom/index.js&quot;: 158, &quot;../node_modules/.npminstall/classnames/2.2.5/classnames/index.js&quot;: 159 &#125;&#125; åœ¨æ™®é€šé…ç½®æ–‡ä»¶å¦‚webpack.config.jsä¸­pluginå¢åŠ DllReferencePluginï¼Œè¿™é‡Œçš„manifestå¯¹åº”åˆšåˆšçš„manifest.jsonï¼š 1234567plugins: [ ... new webpack.DllReferencePlugin(&#123; context: __dirname, manifest: require(&apos;./manifest.json&apos;), &#125;), ] 6. happypackhappyPackåˆ©ç”¨äº†loaderå¤šè¿›ç¨‹å»å¤„ç†æ–‡ä»¶ï¼ŒåŒæ—¶è¿˜åˆ©ç”¨ç¼“å­˜æ¥ä½¿å¾—é‡æ–°æ„å»ºæ›´å¿«ã€‚å·¥ä½œæµå¤§æ¦‚å¦‚ä¸‹å›¾ï¼š è¯¦ç»†å¯ä»¥å‚è€ƒï¼šhappypack å‡å°‘bundleåŒ…ä½“ç§¯1. æå–å…¬å…±ä»£ç å—Webpackæä¾›äº†webpack.optimize.CommonsChunkPluginçš„æ–¹æ³•ï¼Œå¯¹äºå¤šä¸ªè¾“å‡ºæ–‡ä»¶ä¹‹é—´é‡å¤ä½¿ç”¨çš„ä»£ç ï¼Œæ•´ä½“å‡å°‘äº†bundleåŒ…çš„å¤§å°ï¼ŒåŒæ—¶ç¼“å­˜å›ºå®šä¾èµ–ã€‚123456789entry: &#123; ... vendor: [&apos;react&apos;, &apos;react-dom&apos;, ...]&#125;,plugins: [ new webpack.optimize.CommonsChunkPlugin(&#123; names: [&apos;vendor&apos;, &apos;manifest&apos;], &#125;),] 2. æ–‡ä»¶å‹ç¼©Webpackæä¾›äº†UglifyJSæ¥å‹ç¼©jsæ–‡ä»¶ï¼Œä¸€èˆ¬ä¼šå‡å°‘60%å·¦å³çš„ä½“ç§¯ï¼Œæœ‰äººæ¨èä½¿ç”¨webpack-parallel-uglify-pluginæ¥å‹ç¼©ä»£ç èƒ½å¤Ÿå¾—åˆ°æ›´å¿«é€Ÿçš„ä½“éªŒã€‚ 3. çµæ´»ä½¿ç”¨externalsæœ€è¿‘çš„å·¥ä½œæ˜¯å¼€å‘æä¾›ç»™ä¸šåŠ¡çš„React UIåº“ï¼Œä¹‹å‰æ²¡æœ‰å»ä»”ç»†ç ”ç©¶è¿‡externalsï¼Œæ‰“åŒ…ä¹‹åå‘ç°ä¸å‹ç¼©çš„æ–‡ä»¶æœ‰1å…†ï¼‹ï¼Œå¯¹ä¸šåŠ¡ä¸­çš„æ¨¡å—ä¸‹è½½å’Œæ‰“åŒ…è‚¯å®šäº§ç”Ÿä¸€å®šå½±å“äº†ã€‚è®¤çœŸå¼€å§‹ç ”ç©¶æ€§èƒ½ä¼˜åŒ–ä¹‹åå‘ç°é—®é¢˜å‡ºåœ¨react-addons-css-transition-groupä¸Šï¼Œæºç åªæœ‰ç®€å•çš„ä¸€å¥ï¼š 1module.exports = require(&apos;react/lib/ReactCSSTransitionGroup&apos;); æŠŠæ•´ä¸ªreactæ¨¡å—åˆæ‰“åŒ…è¿›æ¥äº†ï¼Œåœ¨externalsä¸­åŠ å…¥react-addons-css-transition-groupä¹‹åæ‰“åŒ…ä½“ç§¯å‰©ä¸‹300+ï¼Œéå¸¸æ˜¾è‘—ã€‚externalså¹¶æ²¡æœ‰é‚£ä¹ˆæ™ºèƒ½å»åˆ¤æ–­è¿™ä¸ªä¸»æ¨¡å—æ˜¯å¦å·²ç»æ”¾åœ¨ä¸æ‰“åŒ…çš„è¡Œåˆ—é‡Œäº†ï¼Œå› æ­¤å¦‚ä½¿ç”¨åˆ°react/lib/ReactDOMä¹Ÿæ˜¯éœ€è¦å•ç‹¬åˆ—å‡ºæ¥ã€‚ 12345externals:[&#123; &apos;react&apos;: &apos;React&apos;, &apos;react/lib/ReactDOM&apos;: &apos;ReactDOM&apos;, &apos;react-addons-css-transition-group&apos;: &apos;ReactCSSTransitionGroup&apos;&#125;] å¦å¤–ï¼Œexternalså¯¹åº”çš„å€¼éœ€è¦æ­£ç¡®å¯¹åº”å½“å‰æ¨¡å—æš´éœ²çš„æ¨¡å—åï¼Œå¦åˆ™åœ¨é€šè¿‡scriptå¼•å…¥çš„æƒ…å†µä¸‹æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼š123&lt;script src=&quot;https://npmcdn.com/react@0.14.2/dist/react.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://npmcdn.com/react-dom@0.14.3/dist/react-dom.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;./../dist/bundle.js&quot;&gt;&lt;/script&gt; é‚£ä¹ˆåœ¨ä¸šåŠ¡é¡¹ç›®ä¸­ä½¿ç”¨çš„æ—¶å€™ï¼Œå½“å‰æ¨¡å—æ‰¾ä¸åˆ°reactç›¸å…³çš„ä¾èµ–ä¼šå‘å¤–åœ¨é¡¹ç›®çš„node_modulesé‡Œé¢å¯»æ‰¾ä¾èµ–æ¨¡å—ã€‚ æ€»ç»“æ—æ—æ€»æ€»æäº†ä¸€äº›ä¼˜åŒ–ç‚¹ï¼Œéƒ¨åˆ†æ˜¯å‰äººæ€»ç»“çš„ä¼˜åŒ–ç‚¹ã€‚æœ€ç»ˆè¿˜æ˜¯è¦é’ˆå¯¹é¡¹ç›®çš„éœ€æ±‚æ¥åšä¼˜åŒ–ã€‚ å‚è€ƒï¼šå¦‚ä½• 10 å€æé«˜ä½ çš„ Webpack æ„å»ºæ•ˆç‡","raw":null,"content":null,"categories":[],"tags":[{"name":"é™ˆå°é¥¼","slug":"é™ˆå°é¥¼","permalink":"http://yoursite.com/tags/é™ˆå°é¥¼/"},{"name":"webpack","slug":"webpack","permalink":"http://yoursite.com/tags/webpack/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","permalink":"http://yoursite.com/tags/æ€§èƒ½ä¼˜åŒ–/"}]},{"title":"Promise-JavaScriptå¼‚æ­¥ç¼–ç¨‹","slug":"Promise-JavaScriptå¼‚æ­¥ç¼–ç¨‹","date":"2017-03-05T06:57:24.000Z","updated":"2017-03-06T12:23:24.000Z","comments":true,"path":"20170305/Promise-JavaScriptå¼‚æ­¥ç¼–ç¨‹/","link":"","permalink":"http://yoursite.com/20170305/Promise-JavaScriptå¼‚æ­¥ç¼–ç¨‹/","excerpt":"Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚\nWhy Promise?Javascriptæ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼Œå› è€Œå¾ˆå¤šçš„æ“ä½œéƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå…¶ä¸­Ajaxå°±æ˜¯å…¸å‹çš„å¼‚æ­¥æ“ä½œã€‚å¯¹äºå¼‚æ­¥æ‰§è¡Œä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆæ˜¯å›è°ƒå‡½æ•°ï¼Œä¼˜ç‚¹æ˜¯ç®€å•ã€å®¹æ˜“ç†è§£å’Œä½¿ç”¨ï¼Œç¼ºç‚¹æ˜¯ä¸åˆ©äºä»£ç çš„é˜…è¯»å’Œç»´æŠ¤ï¼Œä»£ç çš„é«˜åº¦è€¦åˆä½¿å¾—ç¨‹åºç»“æ„æ··ä¹±ï¼Œå¤šå±‚å›è°ƒåµŒå¥—è‡´ä½¿æµç¨‹éš¾ä»¥è¿½è¸ªã€‚\nES2015æä¾›äº†PromiseåŸç”Ÿå¯¹è±¡ï¼Œèƒ½å¤Ÿä¸ºå¼‚æ­¥ä»£ç æ‰§è¡Œç»“æœçš„æˆåŠŸå’Œå¤±è´¥åˆ†åˆ«ç»‘å®šå¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼Œå¯ä»¥é‡‡ç”¨é“¾å¼çš„å†™æ³•ä¸²è”å¤šä¸ªPromiseå¯¹è±¡ï¼Œè¯­æ³•ä¸Šæ›´æ˜æ™°ã€‚\nåŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š123456789var promise = new Promise(function(resolve, reject) &#123;  // ... some code  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */)&#123;    resolve(value);  &#125; else &#123;    reject(error);  &#125;&#125;);\nå…³äºé“¾å¼å†™æ³•ï¼Œå€Ÿç”¨MDNçš„å›¾å‚è€ƒå¦‚ä¸‹ï¼š\nPromiseæœ‰ä¸‰ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯pendingè¡¨ç¤ºåˆå§‹çŠ¶æ€ï¼›fulfilled(æˆ–resolved)è¡¨ç¤ºæ“ä½œæˆåŠŸå®Œæˆï¼›rejectedè¡¨ç¤ºæ“ä½œå¤±è´¥ã€‚çŠ¶æ€çš„æ”¹å˜åªæœ‰2ç§å¯èƒ½ï¼Œä»pendingå˜æˆfulfilledä»¥åŠä»pendingå˜æˆrejectedï¼Œä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ã€‚","text":"Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ Why Promise?Javascriptæ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼Œå› è€Œå¾ˆå¤šçš„æ“ä½œéƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå…¶ä¸­Ajaxå°±æ˜¯å…¸å‹çš„å¼‚æ­¥æ“ä½œã€‚å¯¹äºå¼‚æ­¥æ‰§è¡Œä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆæ˜¯å›è°ƒå‡½æ•°ï¼Œä¼˜ç‚¹æ˜¯ç®€å•ã€å®¹æ˜“ç†è§£å’Œä½¿ç”¨ï¼Œç¼ºç‚¹æ˜¯ä¸åˆ©äºä»£ç çš„é˜…è¯»å’Œç»´æŠ¤ï¼Œä»£ç çš„é«˜åº¦è€¦åˆä½¿å¾—ç¨‹åºç»“æ„æ··ä¹±ï¼Œå¤šå±‚å›è°ƒåµŒå¥—è‡´ä½¿æµç¨‹éš¾ä»¥è¿½è¸ªã€‚ ES2015æä¾›äº†PromiseåŸç”Ÿå¯¹è±¡ï¼Œèƒ½å¤Ÿä¸ºå¼‚æ­¥ä»£ç æ‰§è¡Œç»“æœçš„æˆåŠŸå’Œå¤±è´¥åˆ†åˆ«ç»‘å®šå¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼Œå¯ä»¥é‡‡ç”¨é“¾å¼çš„å†™æ³•ä¸²è”å¤šä¸ªPromiseå¯¹è±¡ï¼Œè¯­æ³•ä¸Šæ›´æ˜æ™°ã€‚ åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š123456789var promise = new Promise(function(resolve, reject) &#123; // ... some code if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */)&#123; resolve(value); &#125; else &#123; reject(error); &#125;&#125;); å…³äºé“¾å¼å†™æ³•ï¼Œå€Ÿç”¨MDNçš„å›¾å‚è€ƒå¦‚ä¸‹ï¼š Promiseæœ‰ä¸‰ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯pendingè¡¨ç¤ºåˆå§‹çŠ¶æ€ï¼›fulfilled(æˆ–resolved)è¡¨ç¤ºæ“ä½œæˆåŠŸå®Œæˆï¼›rejectedè¡¨ç¤ºæ“ä½œå¤±è´¥ã€‚çŠ¶æ€çš„æ”¹å˜åªæœ‰2ç§å¯èƒ½ï¼Œä»pendingå˜æˆfulfilledä»¥åŠä»pendingå˜æˆrejectedï¼Œä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ã€‚ ä»¥Ajaxä¸ºä¾‹ï¼š123456789101112131415161718var ajax = function(url)&#123; return new Promise(function(resolve, reject)&#123; var xhr = new XMLHttpRequest(); xhr.open(&quot;get&quot;, url, true); xhr.responseType = &quot;json&quot;; xhr.onreadystatechange = readyStateHandle; xhr.send(); function readyStateHandle()&#123; if(this.readyState !== 4) return; if(this.status === 200)&#123; resolve(this.response); &#125;else&#123; reject(new Error(this.statusText)); &#125; &#125; &#125;);&#125; ç›®å‰Chromeã€Firefoxã€Safariçš„é«˜ç‰ˆæœ¬å·²ç»æ”¯æŒPromiseã€‚ Promise API.then()ä¸ºPromiseå®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯fulfilledçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œå³promiseè¢«æˆåŠŸå®Œæˆæ‰§è¡Œçš„å›è°ƒï¼›ç¬¬äºŒä¸ªå‚æ•°(å¯é€‰)æ˜¯rejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œå³promiseè¢«æ‹’ç»æˆ–è€…å‡ºç°ä»»ä½•é”™è¯¯ã€å¼‚å¸¸çš„è¿‡ç¨‹ä¸­è¢«æ•æ‰åˆ°æ—¶æ‰§è¡Œçš„å›è°ƒï¼Œå¯ä»¥ä¸ä¼ å¯¹æŠ›å‡ºçš„é”™è¯¯ä¸åšå¤„ç†ã€‚ ç»§ç»­ä¸Šé¢çš„Ajaxçš„ä¾‹å­ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š12345ajax(&quot;./posts.json&quot;).then((json) =&gt; &#123; console.log(&apos;Contents:&apos;, json);&#125;, (error) =&gt; &#123; console.error(&apos;å‡ºé”™äº†&apos;, error);&#125;); thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨é“¾å¼å†™æ³•ã€‚ ç¬¬ä¸€ä¸ªfulfilledå›è°ƒå‡½æ•°çš„è¿”å›æœ‰2ç§æƒ…å†µï¼šç¬¬ä¸€ç§æ˜¯è¿”å›æŸä¸ªå›ºå®šçš„å€¼ï¼Œå°†ä¼šä½œä¸ºå‚æ•°ä¼ å…¥ç¬¬äºŒä¸ªthenæ–¹æ³•çš„fulfilledå›è°ƒï¼š1234567ajax(&quot;./posts.json&quot;).then(json =&gt; &#123; // è¿”å›ä¸€ä¸ªstring return json.nextJsonUrl;&#125;).then( url =&gt; console.log(url), // å¾—åˆ°json.nextJsonUrlå¯¹åº”çš„å€¼ï¼Œä¸€ä¸ªstring error =&gt; console.error(&apos;å‡ºé”™äº†&apos;, error)) ç¬¬äºŒç§æ˜¯è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œåˆ™ç¬¬äºŒä¸ªthenå°†ä¼šç­‰å¾…å½“å‰çŠ¶æ€å‘ç”Ÿå˜åŒ–ä¹‹åå†æŒ‰ç…§ç»“æœå†³å®šè°ƒç”¨å“ªä¸ªå›è°ƒï¼š1234567ajax(&quot;./posts.json&quot;).then(json =&gt; &#123; // è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ return ajax(json.nextJsonUrl);&#125;).then( nextJson =&gt; console.log(nextJson), // å‡è®¾æˆåŠŸï¼Œå¾—åˆ°ç¬¬äºŒä¸ªjsonçš„å†…å®¹ error =&gt; console.error(&apos;å‡ºé”™äº†&apos;, error)) .catch()catchæ–¹æ³•ç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ï¼Œç­‰åŒäºthen(null, rejection)ï¼Œå¦‚ä¸‹ï¼š12345678910ajax(&quot;./posts.json&quot;).then( json =&gt; &#123;...&#125;, error =&gt; console.error(&apos;å‡ºé”™äº†&apos;, error))// ç­‰åŒäºajax(&quot;./posts.json&quot;).then( json =&gt; &#123;...&#125;).catch( error =&gt; console.error(&apos;å‡ºé”™äº†&apos;, error)) ç”¨catchèƒ½å¤Ÿæ•è·ajax()æŠ›å‡ºçš„é”™è¯¯å’Œthenæ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„å¼‚å¸¸æˆ–é”™è¯¯ï¼Œç›¸å¯¹thenç”¨catchå¤„ç†rejectedçŠ¶æ€çš„å†™æ³•æ›´ä½³ã€‚ catchæ–¹æ³•è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå› æ­¤æ¥ä¸‹å»è¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨thenæ–¹æ³•ã€‚1234567ajax(&quot;./posts.json&quot;).then(json =&gt; &#123; return ajax(json.nextJsonUrl);&#125;).catch( error =&gt; console.error(&apos;å‡ºé”™äº†&apos;, error)).then( nextJson =&gt; console.log(nextJson)) å¦‚æœcatchä¹‹å‰æ²¡æœ‰æŠ¥é”™ï¼Œåˆ™ç›´æ¥è·³è¿‡catchæ‰§è¡Œä¸‹ä¸€ä¸ªthenæ–¹æ³•ï¼Œè¿™æ—¶å€™è¿™ä¸ªthenæ˜¯å¦æŠ¥é”™ä¸å‰é¢çš„catchå°±æ— å…³äº†ã€‚è‹¥å½“å‰catchæ–¹æ³•ä¸­æŠ›å‡ºé”™è¯¯ï¼Œåœ¨å½“å‰catchä¸­æ˜¯æ— æ³•æ•è·çš„ï¼Œéœ€è¦åœ¨åé¢çš„catchæ–¹æ³•ä¸­æ•è·/å¤„ç†ã€‚ .all() &amp; .race()allæ–¹æ³•å’Œraceæ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ªPromiseå®åŠ›åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼Œå¦‚æœå‚æ•°éPromiseå®ä¾‹ï¼Œä¼šå…ˆé€šè¿‡Promise.resolveæ–¹æ³•è½¬åŒ–ï¼Œè¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯Promiseå®ä¾‹ã€‚ å¯¹äºallæ–¹æ³•ï¼Œåªæœ‰æ‰€æœ‰æˆå‘˜éƒ½å˜æˆfulfilledï¼Œpromisesçš„çŠ¶æ€æ‰ä¼šå˜æˆfulfilledï¼Œè¿™æ—¶çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ä¼ é€’ç»™promisesçš„å›è°ƒå‡½æ•°ï¼›åªè¦ä»»ä½•ä¸€ä¸ªæˆå‘˜çš„çŠ¶æ€å˜ä¸ºrejectedï¼Œpromisesçš„çŠ¶æ€å°±ä¼šå˜æˆrejectedï¼Œç¬¬ä¸€ä¸ªè¢«rejectedçš„å®ä¾‹çš„è¿”å›å€¼ä¼ é€’ç»™promisesçš„å›è°ƒå‡½æ•°ã€‚12345var promises = Promise.all([p1,p2,p3]).then((posts)=&gt;&#123; console.log(posts); // å‡è®¾æˆåŠŸï¼Œè¿”å›p1,p2,p3è¿”å›å€¼çš„æ•°ç»„&#125;).catch((error)=&gt;&#123; console.error(error); // å‡è®¾å¤±è´¥ï¼Œéå†ä¹‹åè¿”å›ç¬¬ä¸€ä¸ªå¤±è´¥æˆå‘˜çš„é”™è¯¯ä¿¡æ¯&#125;); å¯¹äºraceæ–¹æ³•ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªæˆå‘˜ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œå°±ä¼šä½œä¸ºè¿”å›å€¼ä¼ é€’ç»™promisesçš„å›è°ƒå‡½æ•°ã€‚123456var promises = Promise.race([p1,p2,p3]).then((posts)=&gt;&#123; console.log(posts); // å‡è®¾æˆåŠŸï¼Œè¿”å›æˆå‘˜ä¸­ä¸­æœ€å¼€å§‹çŠ¶æ€å˜ä¸ºfulfilledçš„è¿”å›å€¼&#125;).catch((error)=&gt;&#123; console.error(error); // å‡è®¾å¤±è´¥ï¼Œè¿”å›ç¬¬ä¸€ä¸ªå¤±è´¥æˆå‘˜çš„é”™è¯¯ä¿¡æ¯ï¼ŒåŒºåˆ«åœ¨äºåªè¦å‘ç°æœ‰ä¸€ä¸ªé”™è¯¯é©¬ä¸Šè¿”å›é”™è¯¯&#125;); .resolve()resolveæ–¹æ³•ç”¨äºå°†ä¼ å…¥çš„å‚æ•°è½¬åŒ–ä¸ºPromiseå¯¹è±¡ã€‚12345Promise.resolve(&quot;Hello World&quot;);// ç­‰åŒäºnew Promise(resolve =&gt; &#123; resolve(&quot;Hello World&quot;);&#125;) ä¼ å‚å¯èƒ½æœ‰å››ç§æƒ…å†µï¼š å‚æ•°æ˜¯ä¸€ä¸ªPromiseå®ä¾‹ï¼šä¸åšä»»ä½•æ”¹å˜è¿”å›ã€‚ å‚æ•°æ˜¯ä¸€ä¸ªthenableå¯¹è±¡ï¼šæŒ‡çš„æ˜¯å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼Œè½¬ä¸ºPromiseå¯¹è±¡ï¼Œç«‹å³æ‰§è¡Œè¯¥å¯¹è±¡çš„thenæ–¹æ³•ã€‚ å‚æ•°æ ¹æœ¬ä¸æ˜¯å¯¹è±¡ï¼šè¿”å›ä¸€ä¸ªçŠ¶æ€ä¸ºResolvedçš„Promiseå¯¹è±¡ã€‚ ä¸å¸¦ä»»ä½•å‚æ•°ï¼šç›´æ¥è¿”å›ä¸€ä¸ªResolvedçŠ¶æ€çš„Promiseå¯¹è±¡ã€‚ .reject()rejectæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªä¸ºrejectedçŠ¶æ€çš„Promiseå¯¹è±¡ã€‚1234567Promise.reject(&quot;error!&quot;);// ç±»ä¼¼äºnew Promise((resolve, reject) =&gt; &#123; reject(&quot;error!&quot;);&#125;).catch( error =&gt; console.error(error) // æ§åˆ¶å°çš„è¾“å‡ºç¨æœ‰ä¸åŒ) rejectæ–¹æ³•çš„å‚æ•°ä¼šåŸå°ä¸åŠ¨çš„ä½œä¸ºé”™è¯¯çš„è¿”å›å€¼ï¼Œå¦‚ï¼š1Promise.reject(ajax(&quot;./posts.json&quot;)); å³ä½¿å·²ç»æˆåŠŸè·å–åˆ°posts.jsonçš„å†…å®¹ï¼Œæ§åˆ¶å°ä»ç„¶ä¼šè¾“å‡ºUncaught (in promise) ...ã€‚ æ€»ç»“å¯¹Promiseçš„ç ”ç©¶è¿˜ä¸æ˜¯å¾ˆé€å½»ï¼Œä»è¡¨å±‚çœ‹ï¼Œæˆ–è®¸åªæ˜¯å¯¹ä¼ ç»Ÿå›è°ƒå‡½æ•°å†™æ³•çš„ä¸€ç§å°è£…ï¼Œæä¾›ä¸€ç§æ›´ä¸ºç®€å•å¹²å‡€çš„å†™æ³•ï¼›ä»æŸäº›æ–¹é¢çœ‹ï¼Œé™¤æ­¤ä»¥å¤–ï¼ŒPromiseè¿˜å…·æœ‰ä¸€äº›ç›¸å¯¹ä¸¥è°¨çš„ç‰¹ç‚¹ï¼Œå¦‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœå¯ä»¥å†³å®šå½“å‰çš„çŠ¶æ€ï¼Œä¸”çŠ¶æ€ä¸€æ—¦ç¡®å®šï¼Œå³ä½¿å¾€ä¸‹å†åŠ å…¶å®ƒçš„é€»è¾‘ï¼Œä¹Ÿä¸ä¼šæ”¹å˜å½“å‰çš„ç»“æœã€‚ å‚è€ƒï¼šECMAScript 6å…¥é—¨ï¼Promiseå¯¹è±¡","raw":null,"content":null,"categories":[{"name":"promise","slug":"promise","permalink":"http://yoursite.com/categories/promise/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"promise/å¼‚æ­¥ç¼–ç¨‹","permalink":"http://yoursite.com/categories/promise/å¼‚æ­¥ç¼–ç¨‹/"}],"tags":[{"name":"é™ˆå°é¥¼","slug":"é™ˆå°é¥¼","permalink":"http://yoursite.com/tags/é™ˆå°é¥¼/"},{"name":"promise","slug":"promise","permalink":"http://yoursite.com/tags/promise/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"å¼‚æ­¥ç¼–ç¨‹","permalink":"http://yoursite.com/tags/å¼‚æ­¥ç¼–ç¨‹/"}]},{"title":"Reactç»„ä»¶å•å…ƒæµ‹è¯•","slug":"Reactç»„ä»¶å•å…ƒæµ‹è¯•","date":"2017-01-18T03:25:02.000Z","updated":"2017-01-24T07:41:09.000Z","comments":true,"path":"20170118/Reactç»„ä»¶å•å…ƒæµ‹è¯•/","link":"","permalink":"http://yoursite.com/20170118/Reactç»„ä»¶å•å…ƒæµ‹è¯•/","excerpt":"é’ˆå¯¹reactç»„ä»¶çš„å•å…ƒæµ‹è¯•ï¼Œfacebookæä¾›äº†Test Utilitiesæµ‹è¯•å·¥å…·åº“ï¼ŒAirbnbåŸºäºæ­¤å°è£…äº†ä½¿ç”¨æ›´æ–¹ä¾¿çš„Enzymeã€‚å¦å¤–æ™®åŠä¸€ä¸‹Reactçš„æµ‹è¯•æ¡†æ¶Jestã€‚\nTest UtilitiesShallow Rendering - æµ…æ¸²æŸ“Shallow renderingæ˜¯æŒ‡å°†ç»„ä»¶æ¸²æŸ“æˆè™šæ‹ŸDOMå¯¹è±¡ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰åŠ è½½è¿›çœŸå®DOMï¼Œæ‰€ä»¥å¹¶ä¸è¦æ±‚DOMç¯å¢ƒï¼Œæµ…æ¸²æŸ“åªæ¸²æŸ“ç»„ä»¶çš„ç¬¬ä¸€å±‚ï¼Œä¸æ¶‰åŠæ‰€æœ‰çš„å­ç»„ä»¶ï¼Œå› æ­¤åœ¨å¤„ç†é€Ÿåº¦ä¸Šéå¸¸å¿«ã€‚","text":"é’ˆå¯¹reactç»„ä»¶çš„å•å…ƒæµ‹è¯•ï¼Œfacebookæä¾›äº†Test Utilitiesæµ‹è¯•å·¥å…·åº“ï¼ŒAirbnbåŸºäºæ­¤å°è£…äº†ä½¿ç”¨æ›´æ–¹ä¾¿çš„Enzymeã€‚å¦å¤–æ™®åŠä¸€ä¸‹Reactçš„æµ‹è¯•æ¡†æ¶Jestã€‚ Test UtilitiesShallow Rendering - æµ…æ¸²æŸ“Shallow renderingæ˜¯æŒ‡å°†ç»„ä»¶æ¸²æŸ“æˆè™šæ‹ŸDOMå¯¹è±¡ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰åŠ è½½è¿›çœŸå®DOMï¼Œæ‰€ä»¥å¹¶ä¸è¦æ±‚DOMç¯å¢ƒï¼Œæµ…æ¸²æŸ“åªæ¸²æŸ“ç»„ä»¶çš„ç¬¬ä¸€å±‚ï¼Œä¸æ¶‰åŠæ‰€æœ‰çš„å­ç»„ä»¶ï¼Œå› æ­¤åœ¨å¤„ç†é€Ÿåº¦ä¸Šéå¸¸å¿«ã€‚å‡½æ•°shallowRenderè¿”å›æµ…æ¸²æŸ“çš„è™šæ‹ŸDOMå¯¹è±¡ï¼š1234567import TestUtils from &apos;react/lib/ReactTestUtils.js&apos;;function shallowRender(Component, props)&#123; const renderer = TestUtils.createRenderer(); renderer.render(&lt;Component &#123;...props&#125;/&gt;); return renderer.getRenderOutput();&#125; æµ…æ¸²æŸ“é€‚ç”¨äºä¸éœ€è¦DOMäº¤äº’ï¼Œä¸æ¶‰åŠå­ç»„ä»¶çš„æƒ…å†µï¼Œå¦‚ç®€å•éªŒè¯å±æ€§è®¾ç½®æ˜¯å¦æ­£ç¡®ï¼Œä¼ å€¼æ˜¯å¦æ­£å¸¸ç­‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒéªŒè¯Buttonç»„ä»¶phStyleè®¾ç½®ä¸ºprimaryæ˜¯å¦æˆåŠŸæ·»åŠ åˆ°classNameä¸­ï¼š12345678910import React from &apos;react&apos;;import assert from &apos;assert&apos;;import Button from &apos;../src/Button&apos;;describe(&quot;&lt;Button/&gt;&quot;, function()&#123; it(&apos;phStyleè®¾ç½®ä¸ºprimary&apos;, ()=&gt;&#123; const button = shallowRender(&lt;Button phStyle=&apos;primary&apos;&gt;&lt;/Button&gt;); assert(button.props.className.match(&apos;primary&apos;)); &#125;);&#125;); renderIntoDocument - å°†elementæ¸²æŸ“æˆçœŸå®çš„DOMèŠ‚ç‚¹renderIntoDocumentå°†ç»„ä»¶å®ä¾‹åŒ–ï¼Œæ¸²æŸ“æˆçœŸå®çš„DOMå¯¹è±¡ï¼Œå› æ­¤æ“ä½œç¯å¢ƒä¹Ÿæ˜¯è¦æ±‚å¿…é¡»æ˜¯çœŸå®çš„DOMç¯å¢ƒã€‚æ¸²æŸ“æˆçœŸå®DOMä¹‹åï¼Œå¯ä»¥è¿›è¡Œäº¤äº’ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹å­ç»„ä»¶çš„çŠ¶æ€ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒéªŒè¯Switchç»„ä»¶æ”¹å˜æ—¶æ˜¯å¦è§¦å‘äº†onChangeï¼š1234567891011121314// ...import &#123;findDOMNode&#125; from &apos;react-dom&apos;;import Switch from &apos;../src/Switch&apos;;describe(&quot;&lt;Switch/&gt;&quot;, function()&#123; it(&apos;æ”¹å˜æ—¶è§¦å‘onChange&apos;, ()=&gt;&#123; let checked = true; const switchs = TestUtils.renderIntoDocument(&lt;Switch checked=&#123;checked&#125; onChange=&#123;()=&gt;&#123;checked=false&#125;&#125; /&gt;); const checkbox = TestUtils.scryRenderedDOMComponentsWithTag(switchs, &apos;input&apos;)[0]; TestUtils.Simulate.change(checkbox); assert.equal(checked, false); &#125;);&#125;); åˆå§‹è®¾ç½®checkedä¸ºtrueï¼Œç”±äºå½“å‰æ˜¯çœŸå®DOMï¼Œç”¨åˆ°äº†findDOMNodeå‡½æ•°ï¼ŒæŸ¥æ‰¾DOMç»“æ„ä¸­çš„å½“å‰switchèŠ‚ç‚¹ï¼Œæ‰‹åŠ¨æ”¹å˜ï¼Œæ ¹æ®checkedæ•°å€¼çš„å¯¹æ¯”åˆ¤æ–­æ˜¯å¦æ‰§è¡Œäº†onChangeã€‚ Simulate - æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œSimulate.{eventName}(element,[eventData])å°†ç»„ä»¶æ¸²æŸ“è¿›çœŸå®DOMä¸­ï¼Œæ¨¡æ‹Ÿäººä¸ºæ“ä½œï¼Œå¦‚ç‚¹å‡»ã€è¾“å…¥ç­‰ã€‚123TestUtils.Simulate.click(node);TestUtils.Simulate.change(node);TestUtils.Simulate.keyDown(node, &#123;key: &quot;Enter&quot;, keyCode: 13, which: 13&#125;); èŠ‚ç‚¹æŸ¥æ‰¾Test Utilitiesæä¾›çš„èŠ‚ç‚¹æŸ¥æ‰¾çš„æ–¹æ³•ä»…é€‚ç”¨äºæ¸²æŸ“æˆçœŸå®DOMèŠ‚ç‚¹çš„æƒ…å†µï¼Œå¦‚æœæ˜¯è™šæ‹ŸDOMæ˜¯é€šè¿‡å¯¹props.childrenè¿›è¡ŒæŸ¥æ‰¾ã€‚ è™šæ‹ŸDOMçš„èŠ‚ç‚¹æŸ¥æ‰¾12345678// ...it(&apos;checkbox: labelä¼ å€¼æ˜¾ç¤ºæ­£å¸¸&apos;, ()=&gt;&#123; let label = &apos;æµ‹è¯•&apos;; const checkbox = shallowRender(&lt;Input type=&apos;checkbox&apos; label=&#123;label&#125; /&gt;); assert.equal(checkbox.props.children[1].props.children, label);&#125;);// ... checkbox.props.children[1].props.childrenæŸ¥æ‰¾çš„æ˜¯ç¬¬äºŒä¸ªå­å…ƒç´ çš„å†…å®¹ã€‚ çœŸå®DOMçš„èŠ‚ç‚¹æŸ¥æ‰¾å¯¹äºçœŸå®DOMèŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯JavaScriptåŸç”Ÿçš„ä¸€äº›æ–¹æ³•ï¼Œå¦‚findDOMNode(node).querySelector(...)ã€‚ä»¥ä¸‹æ˜¯Test Utilitiesæä¾›çš„æ–¹æ³•ï¼š scryRenderedDOMComponentsWithClassï¼šæ‰¾å‡ºæ‰€æœ‰åŒ¹é…æŒ‡å®šclassNameçš„èŠ‚ç‚¹ findRenderedDOMComponentWithClassï¼šä¸scryRenderedDOMComponentsWithClassç”¨æ³•ç›¸åŒï¼Œä½†åªè¿”å›ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœ‰é›¶ä¸ªæˆ–å¤šä¸ªåŒ¹é…çš„èŠ‚ç‚¹å°±æŠ¥é”™ scryRenderedDOMComponentsWithTagï¼šæ‰¾å‡ºæ‰€æœ‰åŒ¹é…æŒ‡å®šæ ‡ç­¾çš„èŠ‚ç‚¹ findRenderedDOMComponentWithTagï¼šä¸scryRenderedDOMComponentsWithTagç”¨æ³•ç›¸åŒï¼Œä½†åªè¿”å›ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœ‰é›¶ä¸ªæˆ–å¤šä¸ªåŒ¹é…çš„èŠ‚ç‚¹å°±æŠ¥é”™ scryRenderedComponentsWithTypeï¼šæ‰¾å‡ºæ‰€æœ‰ç¬¦åˆæŒ‡å®šå­ç»„ä»¶çš„èŠ‚ç‚¹ findRenderedComponentWithTypeï¼šä¸scryRenderedComponentsWithTypeç”¨æ³•ç›¸åŒï¼Œä½†åªè¿”å›ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœ‰é›¶ä¸ªæˆ–å¤šä¸ªåŒ¹é…çš„èŠ‚ç‚¹å°±æŠ¥é”™ findAllInRenderedTreeï¼šéå†å½“å‰ç»„ä»¶æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œåªè¿”å›é‚£äº›ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ æ›´å¤šä¿¡æ¯ï¼šTest Utilities EnzymeEnzymeæ¨¡æ‹Ÿäº†JQueryçš„APIå°è£…äº†ä¸€å¥—å¿«é€Ÿä¾¿æ·çš„æµ‹è¯•å·¥å…·åº“ï¼Œç†Ÿæ‚‰JQçš„å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“ä¸Šæ‰‹ã€‚ ä½¿ç”¨æ­£å¼ä½¿ç”¨å‰æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ é¦–å…ˆï¼Œå¯¹äºwebpackçš„ä½¿ç”¨è€…ï¼Œå¯¹äºä¸åŒçš„Reactç‰ˆæœ¬ï¼Œé…ç½®ä¸­éœ€è¦åŠ ä¸Šï¼š 123456789/* webpack.config.js for React 0.14 */// ...externals: &#123; &apos;cheerio&apos;: &apos;window&apos;, &apos;react/addons&apos;: true, &apos;react/lib/ExecutionEnvironment&apos;: true, &apos;react/lib/ReactContext&apos;: true&#125;// ... 12345678/* webpack.config.js for React 15 */// ...externals: &#123; &apos;react/addons&apos;: true, &apos;react/lib/ExecutionEnvironment&apos;: true, &apos;react/lib/ReactContext&apos;: true&#125;// ... æ›´å¤šä¿¡æ¯ï¼šenzyme-guides é’ˆå¯¹ä¸åŒç‰ˆæœ¬Reactçš„å®‰è£… 123/* React 0.13 */npm i react@0.13 --savenpm i --save-dev enzyme 1234/* React 0.14 */npm i --save react@0.14 react-dom@0.14npm i --save-dev react-addons-test-utils@0.14npm i --save-dev enzyme 1234/* React 15 */npm i --save react@15.0.0-rc.2 react-dom@15.0.0-rc.2npm i --save-dev react-addons-test-utils@15.0.0-rc.2npm i --save-dev enzyme æ›´å¤šä¿¡æ¯ï¼šenzyme-installation APIshallowshallowæ–¹æ³•æ˜¯å¯¹Shallow Renderingçš„å°è£…ï¼ŒåŒä¸€ä¸ªä¾‹å­ï¼Œè·å–classNameçš„æ–¹æ³•é€šè¿‡props()æ–¹æ³•è¿”å›ã€‚123456// ...it(&apos;phStyleè®¾ç½®ä¸ºprimary&apos;, ()=&gt;&#123; const button = shallow(&lt;Button phStyle=&apos;primary&apos;&gt;btn&lt;/Button&gt;); assert(button.props().className.match(&apos;primary&apos;));&#125;);// ... åŒä¸€ä¸ªä¾‹å­ï¼Œä½¿ç”¨find()æ–¹æ³•æŸ¥æ‰¾å­èŠ‚ç‚¹ï¼Œtext()æ–¹æ³•è·å–æ–‡æœ¬å†…å®¹ã€‚12345678// ...it(&apos;checkbox: labelä¼ å€¼æ˜¾ç¤ºæ­£å¸¸&apos;, ()=&gt;&#123; let label = &apos;æµ‹è¯•&apos;; const checkbox = shallow(&lt;Input type=&apos;checkbox&apos; label=&#123;label&#125; /&gt;); assert.equal(checkbox.find(&apos;span&apos;).text(), label);&#125;);// ... mountmountå°†Reactç»„ä»¶åŠ è½½ä¸ºçœŸå®çš„DOMèŠ‚ç‚¹ã€‚å’Œshallowçš„apiç›¸åŒï¼Œç”¨find()æ–¹æ³•æŸ¥æ‰¾å­èŠ‚ç‚¹ï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ“ä½œçš„æ–¹æ³•å°è£…ä¸ºsimulate(enentType)ã€‚123456789// ...it(&apos;æ”¹å˜æ—¶è§¦å‘onChange&apos;, ()=&gt;&#123; let checked = true; const switchs = mount(&lt;Switch checked=&#123;checked&#125; onChange=&#123;()=&gt;&#123;checked=false&#125;&#125; /&gt;); switchs.find(&apos;input&apos;).simulate(&apos;change&apos;); assert.equal(checked, false);&#125;);// ... renderrenderæ–¹æ³•é‡‡ç”¨ç¬¬ä¸‰æ–¹åº“Cheerioï¼Œå°†Reactç»„ä»¶æ¸²æŸ“æˆé™æ€çš„HTMLç‰‡æ®µå¹¶åˆ†æå…¶HTMLä»£ç ç»“æ„ï¼Œè¿”å›ä¸€ä¸ªCheerioå®ä¾‹å¯¹è±¡ã€‚12345678// ...it(&apos;checkbox: labelä¼ å€¼æ˜¾ç¤ºæ­£å¸¸&apos;, ()=&gt;&#123; let label = &apos;æµ‹è¯•&apos;; const checkbox = render(&lt;Input type=&apos;checkbox&apos; label=&#123;label&#125; /&gt;); assert.equal(checkbox.find(&apos;span&apos;).text(), label);&#125;);// ... ä½¿ç”¨renderæ–¹æ³•æ—¶ç¢°åˆ°ä¸€ä¸ªé”™è¯¯ï¼š_cheerio2.default.load is not a functionï¼Œè¿˜æ˜¯æ¯”è¾ƒæ™®éçš„ï¼Œè·Ÿwebpacké…ç½®æœ‰å…³ç³»ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š1234567891011121314externals: &#123; &apos;jsdom&apos;: &apos;window&apos;, // &apos;cheerio&apos;: &apos;window&apos;, // ... &#125;, module:&#123; loaders:[ // ... &#123; test: /\\.json$/, loader: &apos;json&apos;, &#125; ] &#125; æ›´å¤šä¿¡æ¯ï¼šenzyme-api å…¶ä»–JestJestæ˜¯facebookåŸºäºJasmineçš„å¼€å‘çš„é’ˆå¯¹Reactçš„å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚æŸ¥èµ„æ–™çš„æ—¶å€™æœ‰äº›æ–‡ç« ä¼šå¯¹æ¯”Enzymeå’ŒJestï¼Œè®©äººè¯¯ä»¥ä¸ºæ˜¯åŒä¸€ç§ä¸œè¥¿çš„ä¸åŒè¡¨è¾¾å½¢å¼ï¼Œä½†å…¶å®å‰è€…æ˜¯æµ‹è¯•å·¥å…·åº“ï¼Œåè€…æ˜¯æµ‹è¯•æ¡†æ¶ï¼Œæ›´å¤šçš„æ—¶å€™ï¼Œä¸¤è€…æ˜¯é…åˆèµ·æ¥ä½¿ç”¨çš„ã€‚ Jest is a JavaScript unit testing framework, used by Facebook to test services and React applications. æ™®åŠåˆ°æ­¤ä¸ºæ­¢ï¼Œæœ‰éœ€è¦ä¹‹åä¼šç ”ç©¶ä¸€ä¸‹Jestï¼Œç„¶åå¥½å¥½å†™ä¸€ç¯‡ã€‚ æ›´å¤šä¿¡æ¯ï¼šjest-react-tutorial æ€»ç»“å…¶å®è¿™ä¸€ç¯‡ä»‹ç»çš„ä¸œè¥¿å¾ˆå°‘ï¼Œå´å†™äº†å¾ˆå¤šçš„ä¾‹å­ï¼Œè¿˜è®°å½•äº†ä¸€äº›ä½¿ç”¨è¿‡ç¨‹ä¸­è®©äººå›°æ‰°çš„æŠ¥é”™ã€‚ç›®å‰æµ‹è¯•ç®—æ˜¯æœ‰ä¸€å¥—æ¯”è¾ƒå®Œå–„çš„æœºåˆ¶ï¼Œä½†æ˜¯æ€»çš„æ¥è¯´ä¸œè¥¿æ¯”è¾ƒæ—§æ¯”è¾ƒå°‘ï¼ŒæŸ¥åˆ°çš„å¤§éƒ¨åˆ†èµ„æ–™éƒ½æ˜¯å¹´ä»½æ¯”è¾ƒä¹…è¿œçš„ã€‚ğŸ˜„","raw":null,"content":null,"categories":[{"name":"react","slug":"react","permalink":"http://yoursite.com/categories/react/"},{"name":"test","slug":"react/test","permalink":"http://yoursite.com/categories/react/test/"}],"tags":[{"name":"react","slug":"react","permalink":"http://yoursite.com/tags/react/"},{"name":"test","slug":"test","permalink":"http://yoursite.com/tags/test/"},{"name":"é™ˆå°é¥¼","slug":"é™ˆå°é¥¼","permalink":"http://yoursite.com/tags/é™ˆå°é¥¼/"}]},{"title":"Yarn-æ¨¡å—ç®¡ç†å·¥å…·","slug":"Yarn-æ¨¡å—ç®¡ç†å·¥å…·","date":"2017-01-11T11:39:50.000Z","updated":"2017-01-24T07:41:59.000Z","comments":true,"path":"20170111/Yarn-æ¨¡å—ç®¡ç†å·¥å…·/","link":"","permalink":"http://yoursite.com/20170111/Yarn-æ¨¡å—ç®¡ç†å·¥å…·/","excerpt":"ç®€ä»‹2016å¹´10æœˆ11æ—¥ï¼Œfacebookå‘å¸ƒæ–°çš„æ¨¡å—ç®¡ç†å·¥å…·Yarnã€‚éšç€NPMçš„å¹¿æ³›ä½¿ç”¨ä¸­ï¼Œå¼€å§‹å‡ºç°å®‰å…¨æ€§å’Œæ€§èƒ½ä¸è¶³çš„é—®é¢˜ï¼Œå¦‚ï¼š\n\nå®‰è£…é€Ÿåº¦æ…¢ï¼ˆè™½ç„¶æ·˜å®NPMé•œåƒè§£å†³äº†å›½å†…ä¸‹è½½æ…¢çš„ç°è±¡ï¼Œä½†æ˜¯ä¸å¯å¦è®¤ä½¿ç”¨NPMå®‰è£…æ…¢çš„é—®é¢˜ï¼‰ã€‚\nå…è®¸å®‰è£…packagesæ—¶æ‰§è¡Œä»£ç ï¼ŒåŸ‹ä¸‹å®‰å…¨éšæ‚£ã€‚\nå®‰è£…packagesçš„ç‰ˆæœ¬ä¸å¤Ÿç¨³å®šç­‰ã€‚\n\nä¸ºå¼¥è¡¥å­˜åœ¨éƒ¨åˆ†ç¼ºé™·çš„NPMï¼Œfacebookå’ŒExponentã€Googleå’ŒTildeä¸€èµ·æ‰“é€ NPMçš„æ›¿ä»£ç‰ˆæœ¬Yarnã€‚","text":"ç®€ä»‹2016å¹´10æœˆ11æ—¥ï¼Œfacebookå‘å¸ƒæ–°çš„æ¨¡å—ç®¡ç†å·¥å…·Yarnã€‚éšç€NPMçš„å¹¿æ³›ä½¿ç”¨ä¸­ï¼Œå¼€å§‹å‡ºç°å®‰å…¨æ€§å’Œæ€§èƒ½ä¸è¶³çš„é—®é¢˜ï¼Œå¦‚ï¼š å®‰è£…é€Ÿåº¦æ…¢ï¼ˆè™½ç„¶æ·˜å®NPMé•œåƒè§£å†³äº†å›½å†…ä¸‹è½½æ…¢çš„ç°è±¡ï¼Œä½†æ˜¯ä¸å¯å¦è®¤ä½¿ç”¨NPMå®‰è£…æ…¢çš„é—®é¢˜ï¼‰ã€‚ å…è®¸å®‰è£…packagesæ—¶æ‰§è¡Œä»£ç ï¼ŒåŸ‹ä¸‹å®‰å…¨éšæ‚£ã€‚ å®‰è£…packagesçš„ç‰ˆæœ¬ä¸å¤Ÿç¨³å®šç­‰ã€‚ ä¸ºå¼¥è¡¥å­˜åœ¨éƒ¨åˆ†ç¼ºé™·çš„NPMï¼Œfacebookå’ŒExponentã€Googleå’ŒTildeä¸€èµ·æ‰“é€ NPMçš„æ›¿ä»£ç‰ˆæœ¬Yarnã€‚ Yarn vs NPMyarn.lockNPMå’ŒYarnéƒ½æ˜¯é€šè¿‡package.jsonæ‹‰å–ä¾èµ–çš„æ¨¡å—ï¼Œä»¥ä¸‹æ˜¯æ‹‰å–æ¨¡å—çš„ç‰ˆæœ¬å·è§„åˆ™ï¼ˆä»¥1.2.2ä¸ºä¾‹ï¼‰ï¼š æŒ‡å®šç‰ˆæœ¬å·ï¼ˆ1.2.2ï¼‰ï¼šåªå®‰è£…æŒ‡å®šç‰ˆæœ¬ æ³¢æµªå·ï¼‹ç‰ˆæœ¬å·ï¼ˆ~1.2,2ï¼‰ï¼šå®‰è£…1.2.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº1.2.2ï¼‰ æ’å…¥å·ï¼‹ç‰ˆæœ¬å·ï¼ˆ^1.2.2ï¼‰ï¼šå®‰è£…1.x.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº1.2.2ï¼‰ å½“æ‰§è¡Œnpm install [package] --saveæ—¶ï¼Œé»˜è®¤saveçš„æ˜¯æ’å…¥å·çš„æ–¹å¼ï¼Œè¡¨ç¤ºå½“å‰çš„æ¨¡å—è‡³å¤šæ˜¯å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢æˆ–é—®é¢˜ä¿®æ­£ã€‚è™½ç„¶èƒ½å¤Ÿæ‰‹åŠ¨æ”¹æˆå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„æ–¹å¼ï¼Œä½†ä¹Ÿä¸èƒ½ç¡®å®šå½“å‰æ¨¡å—ä¾èµ–çš„æ¨¡å—æ˜¯å¦æ˜¯å›ºå®šçš„ï¼Œä¹Ÿå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ¨¡å—éƒ½èƒ½æŒ‰ç…§è¿™æ ·çš„æ–¹å¼æ¥æ›´æ–°å‘å¸ƒï¼Œå› æ­¤æ¯æ¬¡å®‰è£…éƒ½æœ‰å¯èƒ½ä¼šæ‹‰å–åˆ°ä¸€ä»½ç‰ˆæœ¬ä¸å›ºå®šçš„æ¨¡å—ï¼Œè¿™ä¸ªä¸ç¨³å®šæ€§æ˜¯ä¸€ä¸ªæå¤§çš„éšæ‚£ã€‚ yarn.locké”å®šæ–‡ä»¶è§£å†³äº†ä»¥ä¸Šçš„é—®é¢˜ï¼Œåœ¨æ‰§è¡Œyarnå®‰è£…å‘½ä»¤æ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œç¡®åˆ‡çš„è®°å½•å®‰è£…æ¨¡å—çš„ç‰ˆæœ¬å·ã€‚åŒæ ·NPMä¸­å­˜åœ¨ç›¸ä¼¼çš„npm-shrinkwrap.jsonï¼Œéœ€è¦é€šè¿‡æ‰§è¡Œ npm shrinkwrap æ‰‹åŠ¨ç”Ÿæˆã€‚å¯¹æ¯”ä¹‹ä¸‹åœ¨æ•°æ®æ ¼å¼ä¸Šyarn.lockæ›´ä¸ºç²¾ç®€æ¸…æ™°ã€‚ æ›´å¿«çš„æ¨¡å—ä¸‹è½½yarnä¸‹è½½æ—¶ä¼šè¿›è¡Œæ›´å¥½çš„æ’åºï¼Œæœ€å¤§é™åº¦çš„æé«˜ç½‘ç»œåˆ©ç”¨ç‡ï¼Œä¸”å®‰è£…è¿‡ç¨‹ä¸­å¦‚æœç½‘ç»œè¯·æ±‚å¤±è´¥ä¼šè¿›è¡Œè‡ªåŠ¨é‡è¯•ã€‚ ä»¥ä¸‹è½½gruntä¸ºä¾‹ï¼Œyarnè€—æ—¶13.52sï¼ŒNPMç¬¬ä¸€æ¬¡å°è¯•è¶…è¿‡ä¸€åˆ†é’Ÿï¼Œå†æ¬¡å°è¯•åœ¨40så·¦å³ã€‚ï¼ˆä»¥ä¸Šæ•°æ®è·Ÿå½“å‰ç½‘ç»œçŠ¶å†µæœ‰ç›¸å¯¹å¯†åˆ‡å…³ç³»ï¼Œä¸ºå¢åŠ å®éªŒå¯ä¿¡åº¦ï¼Œåœ¨å¤šæ¬¡å°è¯•ä¸åŒçš„æ¨¡å—çš„ä¹‹åï¼Œyarnéƒ½æœ‰ç›¸å¯¹ä¼˜å¼‚çš„ä¸‹è½½é€Ÿåº¦ï¼‰ é™¤æ­¤ï¼Œyarnè¿˜æ”¯æŒç¦»çº¿ä¸‹è½½ï¼Œå‰ææ˜¯ä¹‹å‰ä¸‹è¿‡è¿™ä¸ªåŒ…ã€‚ å¯¹äºå®‰è£…ä¸€æ•´ä¸ªé¡¹ç›®yarnçš„é€Ÿåº¦è¿˜æ˜¯éœ€è¦æå‡ï¼Œä½†æ˜¯åŒæ ·ä¹Ÿå¯ä»¥ç»™yarnè®¾ç½®å®‰è£…æºï¼š1$ yarn config set registry &apos;https://registry.npm.taobao.org&apos; æ›´ç®€æ´çš„è¾“å‡ºyarnçš„è¾“å‡ºä¿¡æ¯æ·»åŠ äº†ä¸€äº›emojiè¡¨æƒ…ğŸ˜„ï¼Œä¿¡æ¯ç®€å•æ˜äº†ï¼ŒNPMçš„è¾“å‡ºç›¸å¯¹å†—é•¿ã€‚ æ›´å¤šä¿¡æ¯ï¼šmigrating-from-npm ä½¿ç”¨å®‰è£…123456// ç”¨Homebrewå®‰è£…$ brew update$ brew install yarn// ç”¨NPMå®‰è£…$ npm install yarn -g CLIå®‰è£…ä¾èµ–å®‰è£…package.jsonçš„ä¾èµ–123$ yarnor$ yarn install æœ¬åœ°å®‰è£…æŸä¸ªæ¨¡å—ä¾èµ–12345$ yarn add [package] -&gt;$ npm install [package] --save$ yarn add [package] [--dev/-D]-&gt;$ npm install --save-dev [package] å…¨å±€å®‰è£…12$ yarn global add [package]-&gt;$ npm install [--global/-g] [package] åˆ é™¤ä¾èµ–12$ yarn remove [package]-&gt;$ npm uninstall --save [package] å‡çº§ä¾èµ–æ ¹æ®package.jsonæ–‡ä»¶é‡æ–°å®‰è£…åˆ°å½“å‰é…ç½®çš„æœ€æ–°ç‰ˆæœ¬12$ yarn upgrade-&gt;$ rm -rf node_modules &amp;&amp; npm install æ›´å¤šä¸NPMçš„CLIå¯¹æ¯”ï¼šcli-commands-comparisonæ›´å¤šCLIä»‹ç»ï¼šcli-introduction å…¶ä»–æé†’ä¸€ä¸‹ï¼Œå½“å¼€å§‹ä½¿ç”¨yarnè¦è®°å¾—å°†yarn.lockæ–‡ä»¶ä¸€èµ·æ”¾è¿›ä»£ç ä»“åº“ä¸­åˆ†äº«ç»™å°ä¼™ä¼´ï¼Œè¿™æ˜¯å‡†ç¡®å®‰è£…çš„ä¿è¯ã€‚ æ€»ç»“å¥½åƒä¸€æ•´ç¯‡æ–‡ç« éƒ½åœ¨èµæ‰¬yarnè´¬ä½NPMï¼Œä½†æ˜¯ä¸€ä¸ªä¸œè¥¿åšå‡ºæ¥è¦è®©å¤§ä¼—æ¥å—åŠ¿å¿…è¦æ¯”å‰è€…æ›´åŠ ä¼˜ç§€ã€‚NPMçš„å¼ºå¤§éƒ½è§è¯†è¿‡äº†ï¼Œä½†é—®é¢˜ä¹Ÿæ˜¯æ¥è¸µè€Œè‡³ï¼Œyarnå¯¹æ­¤åšäº†å¾ˆå¤šçš„æ”¹å–„ï¼Œä½†æ˜¯ç›®å‰çœ‹åˆ°yarnçš„issueä¹Ÿæ˜¯ä¸æ–­ï¼Œæ¯•ç«Ÿæ˜¯æ–°ä¸œè¥¿ï¼Œè¿˜éœ€è¦æ—¶é—´çš„æ²‰æ·€ğŸ˜„ã€‚","raw":null,"content":null,"categories":[{"name":"yarn","slug":"yarn","permalink":"http://yoursite.com/categories/yarn/"},{"name":"npm","slug":"yarn/npm","permalink":"http://yoursite.com/categories/yarn/npm/"},{"name":"å·¥å…·","slug":"yarn/npm/å·¥å…·","permalink":"http://yoursite.com/categories/yarn/npm/å·¥å…·/"}],"tags":[{"name":"é™ˆå°é¥¼","slug":"é™ˆå°é¥¼","permalink":"http://yoursite.com/tags/é™ˆå°é¥¼/"},{"name":"Yarn","slug":"Yarn","permalink":"http://yoursite.com/tags/Yarn/"},{"name":"NPM","slug":"NPM","permalink":"http://yoursite.com/tags/NPM/"},{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"http://yoursite.com/tags/å·¥å…·/"}]},{"title":"XMLHttpRequest","slug":"XMLHttpRequest","date":"2016-12-30T02:28:11.000Z","updated":"2017-01-24T07:41:20.000Z","comments":true,"path":"20161230/XMLHttpRequest/","link":"","permalink":"http://yoursite.com/20161230/XMLHttpRequest/","excerpt":"","text":"Ajax &amp; XMLHttpRequestajaxæ˜¯ä¸€ç§æŠ€æœ¯æ–¹æ¡ˆ,å®ƒä¾èµ–çš„æ˜¯ç°æœ‰çš„HTML/CSS/Javascript,è€Œå…¶ä¸­æœ€æ ¸å¿ƒçš„ä¾èµ–æ˜¯æµè§ˆå™¨æä¾›çš„XMLHttpRequestå¯¹è±¡,æ˜¯è¿™ä¸ªå¯¹è±¡ä½¿å¾—æµè§ˆå™¨å¯ä»¥å‘å‡ºHTTPè¯·æ±‚å’Œæ¥æ”¶HTTPå“åº”ã€‚å³ç”¨XMLHttpRequestå¯¹è±¡æ¥å‘é€ä¸€ä¸ªAjaxè¯·æ±‚ã€‚ XMLHttpRequestå‘å±•å†ç¨‹level1ç¼ºç‚¹ï¼š åªæ”¯æŒæ–‡æœ¬æ•°æ®çš„ä¼ é€ï¼Œæ— æ³•ç”¨æ¥è¯»å–å’Œä¸Šä¼ äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä¼ é€å’Œæ¥æ”¶æ•°æ®æ—¶ï¼Œæ²¡æœ‰è¿›åº¦ä¿¡æ¯ï¼Œåªèƒ½æç¤ºæœ‰æ²¡æœ‰å®Œæˆã€‚ å—åˆ°â€åŒåŸŸé™åˆ¶â€ï¼Œåªèƒ½å‘åŒä¸€åŸŸåçš„æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚ level2æ”¹è¿›ç‚¹ï¼š å¯ä»¥è®¾ç½®HTTPè¯·æ±‚çš„æ—¶é™ã€‚ å¯ä»¥ä½¿ç”¨FormDataå¯¹è±¡ç®¡ç†è¡¨å•æ•°æ®ã€‚ å¯ä»¥ä¸Šä¼ æ–‡ä»¶ã€‚ å¯ä»¥è¯·æ±‚ä¸åŒåŸŸåä¸‹çš„æ•°æ®ï¼ˆè·¨åŸŸè¯·æ±‚ï¼‰ã€‚ å¯ä»¥è·å–æœåŠ¡å™¨ç«¯çš„äºŒè¿›åˆ¶æ•°æ®ã€‚ å¯ä»¥è·å¾—æ•°æ®ä¼ è¾“çš„è¿›åº¦ä¿¡æ¯ã€‚ XMLHttpRequestä½¿ç”¨1234567891011121314151617181920212223function sendAjax(data) &#123; // åˆ›å»ºxhrå¯¹è±¡ var xhr = new XMLHttpRequest(); // è®¾ç½®xhrè¯·æ±‚çš„è¶…æ—¶æ—¶é—´ xhr.timeout = 3000; // è®¾ç½®å“åº”è¿”å›çš„è¶…æ—¶æ—¶é—´ xhr.responseType = &apos;text&apos;; // åˆ›å»ºä¸€ä¸ªpostè¯·æ±‚,é‡‡ç”¨å¼‚æ­¥ xhr.open(&apos;POST&apos;, &apos;/server&apos;, true); // æ³¨å†Œç›¸å…³äº‹ä»¶å›è°ƒå¤„ç†å‡½æ•° xhr.onload = function(e)&#123; if(this.status == 200 || this.status == 304)&#123; alert(this.responseText); &#125; &#125;; xhr.ontimeout = function(e) &#123;&#125; xhr.onerror = function(e) &#123;&#125; xhr.upload.onprogress = function(e) &#123;&#125; // å‘é€æ•°æ® xhr.send(data);&#125;","raw":null,"content":null,"categories":[{"name":"http","slug":"http","permalink":"http://yoursite.com/categories/http/"}],"tags":[{"name":"http","slug":"http","permalink":"http://yoursite.com/tags/http/"}]},{"title":"React Lifecycle","slug":"react-lifecycle","date":"2016-12-29T07:25:08.000Z","updated":"2017-01-24T07:41:37.000Z","comments":true,"path":"20161229/react-lifecycle/","link":"","permalink":"http://yoursite.com/20161229/react-lifecycle/","excerpt":"","text":"ç”Ÿå‘½å‘¨æœŸMore Info: Component Specs and Lifecycle ç»„ä»¶æ¸²æŸ“ç»å†çš„ç”Ÿå‘½å‘¨æœŸç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼š getDefaultProps getInitialState componentWillMount render componentDidMount ç¬¬äºŒæ¬¡æ¸²æŸ“ï¼š getInitialState componentWillMount render componentDidMount Propsæ”¹å˜æ—¶ï¼š componentWillReceiveProps shouldComponentUpdate componentWillUpdate render componentDidUpdate Stateæ”¹å˜æ—¶ï¼š shouldComponentUpdate componentWillUpdate render componentDidUpdate ç»„ä»¶å¸è½½æ—¶ï¼š componentWillUnmont","raw":null,"content":null,"categories":[{"name":"react","slug":"react","permalink":"http://yoursite.com/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"http://yoursite.com/tags/react/"}]}]}